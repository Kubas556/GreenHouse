{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar __jsx = React.createElement;\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { Typography, Paper } from \"@material-ui/core\";\nimport withAuth from \"../../components/WithAuth\";\nimport WithDrawerAppBar from \"../../components/WithDrawerAppBar\";\nimport { firebase } from \"../../firebase/index\";\nimport { Line } from \"react-chartjs-2\";\nimport SoilHumidity from \"../../components/SoilHumidity\";\nimport AirHumidity from \"../../components/AirHumidity\";\nvar useStyle = makeStyles(function (theme) {\n  return {\n    center: {\n      display: 'flex',\n      width: 'calc(100% - 1px)'\n    },\n    page: {\n      width: '100%',\n      position: 'relative'\n    },\n    controllComponent: {\n      margin: '50px',\n      width: 'min-content',\n      padding: '1rem'\n    }\n  };\n});\n\nfunction Id(props) {\n  var classes = useStyle();\n\n  var _useState = useState(0),\n      soilHumidity = _useState[0],\n      setSoilHumidity = _useState[1];\n\n  var _useState2 = useState(0),\n      airHumidity = _useState2[0],\n      setAirHumidity = _useState2[1];\n\n  var _useState3 = useState(),\n      airHumidityHistoryCharData = _useState3[0],\n      setAirHumidityHistoryCharData = _useState3[1];\n\n  var _useState4 = useState(),\n      aitHumidityHistoryCharLabels = _useState4[0],\n      setAirHumidityHistoryCharLabels = _useState4[1];\n\n  var _useState5 = useState(),\n      defTemp = _useState5[0],\n      setDefTemp = _useState5[1];\n\n  var router = useRouter();\n  var id = router.query.id;\n  var timeFormat = 'MM/DD/YYYY HH:mm';\n  var soilHumidityData = firebase.database().ref(\"/users/\" + props.user + \"/devices/\" + id + \"/soilHumidity\");\n  var airHumidityData = firebase.database().ref(\"/users/\" + props.user + \"/devices/\" + id + \"/airHumidity\");\n  var humidityHistoryData = firebase.database().ref(\"/users/\" + props.user + \"/devices/\" + id + \"/history/airHumidity\"); //let targetTempData = firebase.database().ref(\"/users/\"+props.user+\"/devices/\"+id+\"/targetTemp\");\n\n  var termostatChange = function termostatChange(value) {\n    firebase.database().ref(\"/users/\" + props.user + \"/devices/\" + id + \"/targetTemp\").set(value);\n  };\n\n  useEffect(function () {\n    soilHumidityData.on('value', function (data) {\n      setSoilHumidity(data.val());\n    });\n    airHumidityData.on('value', function (data) {\n      setAirHumidity(data.val());\n    });\n    humidityHistoryData.on('value', function (data) {\n      var charData = [];\n      var charLabels = [];\n\n      _Object$keys(data.val()).forEach(function (key) {\n        charData.push(data.val()[key].value);\n        charLabels.push(data.val()[key].time[1] + '/' + data.val()[key].time[2] + '/' + data.val()[key].time[0] + ' ' + data.val()[key].time[3] + ':' + data.val()[key].time[4]);\n      });\n\n      setAirHumidityHistoryCharData(charData);\n      setAirHumidityHistoryCharLabels(charLabels);\n    });\n    /*targetTempData.once('value',data=>{\r\n        setDefTemp(data.val());\r\n    });*/\n  }, []);\n  return __jsx(\"div\", {\n    className: classes.page\n  }, __jsx(Typography, {\n    component: \"h1\",\n    variant: \"h2\"\n  }, \"Zavla\\u017Eov\\xE1n\\xED\"), __jsx(\"div\", {\n    className: classes.center\n  }, __jsx(\"div\", {\n    className: classes.controllComponent\n  }, __jsx(Paper, {\n    elevation: 3,\n    style: {\n      padding: '1rem'\n    }\n  }, __jsx(SoilHumidity, {\n    theme: props.theme,\n    value: soilHumidity\n  }))), __jsx(\"div\", {\n    className: classes.controllComponent\n  }, __jsx(Paper, {\n    elevation: 3,\n    style: {\n      padding: '1rem'\n    }\n  }, __jsx(AirHumidity, {\n    theme: props.theme,\n    value: airHumidity\n  })))), __jsx(\"div\", {\n    className: classes.center\n  }, __jsx(\"div\", {\n    className: classes.controllComponent,\n    style: {\n      width: 'calc(100% - 100px)'\n    }\n  }, __jsx(Paper, null, __jsx(Line, {\n    height: 200,\n    data: {\n      labels: aitHumidityHistoryCharLabels,\n      datasets: [{\n        label: 'value',\n        data: airHumidityHistoryCharData,\n        backgroundColor: function backgroundColor(context) {\n          var gradient = context.chart.ctx.createLinearGradient(0, 0, 0, 200);\n          gradient.addColorStop(0, 'rgba(24,184,212,0.5)');\n          gradient.addColorStop(1, 'rgba(24,184,212,0)');\n          return gradient;\n        },\n        pointBackgroundColor: 'rgb(24,184,212)',\n        borderColor: 'rgb(24,184,212)',\n        borderWidth: 0,\n        fill: true\n      }]\n    },\n    options: {\n      scales: {\n        xAxes: [{\n          display: false,\n          gridLines: {\n            display: false\n          }\n        }],\n        yAxes: [{\n          display: true,\n          gridLines: {\n            color: props.theme == 1 ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',\n            zeroLineColor: props.theme == 1 ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',\n            drawTicks: false,\n            display: false\n          },\n          ticks: {\n            stepSize: 10,\n            padding: 10\n          }\n        }]\n      },\n      legend: {\n        display: true\n      },\n      maintainAspectRatio: false\n    }\n  })))));\n}\n\nfunction ex2(props) {\n  var router = useRouter();\n  var id = router.query.id;\n\n  var _useState6 = useState(\"\"),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var nameData = firebase.database().ref(\"/users/\" + props.user + \"/devices/\" + id + \"/name\");\n  useEffect(function () {\n    nameData.on('value', function (data) {\n      setName(data.val());\n    });\n  }, []);\n  return __jsx(WithDrawerAppBar, {\n    component: Id,\n    title: name,\n    deviceId: id.toString(),\n    componentProps: props\n  });\n}\n\nexport default withAuth(ex2);","map":null,"metadata":{},"sourceType":"module"}