{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jakub Sedlak\\\\WebstormProjects\\\\projekt_CP - typescript\\\\components\\\\Termostat.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef, useState } from \"react\";\nimport anime from \"animejs\";\n\nfunction Termostat(props) {\n  const min = 0;\n  const max = 50;\n  const width = 500;\n  const height = 500;\n  const minAngle = 0;\n  const maxAngle = 180;\n  const segCount = 22; //11;\n\n  const lines = useRef(null);\n  const valueInput = useRef(null);\n  const hand = useRef(null);\n  const handle = useRef(null);\n  const {\n    0: containers,\n    1: setContainers\n  } = useState();\n  const {\n    0: lastNode,\n    1: setLastNode\n  } = useState();\n  const {\n    0: lastNodeAngle,\n    1: setLastNodeAngle\n  } = useState(0);\n  const {\n    0: angleTrans,\n    1: setAngleTrans\n  } = useState(0);\n  const {\n    0: currentAngle,\n    1: setCurrentAngle\n  } = useState(0);\n  const {\n    0: handAngle,\n    1: setHandAngle\n  } = useState(0);\n  const {\n    0: currentValue,\n    1: setCurrentValue\n  } = useState(0);\n  const {\n    0: drag,\n    1: setDrag\n  } = useState(false);\n  const {\n    0: initialize,\n    1: setInitialize\n  } = useState(true);\n  const workspaceSizes = {\n    height: \"500px\",\n    width: \"500px\"\n  };\n  const linesSize = {\n    width: \"500px\"\n  };\n  const lineContainerSizes = {\n    width: \"250px\"\n  };\n\n  function inputUpdated(e) {\n    let val = e.target.value;\n    setCurrentValue(val);\n    setCurrentAngle(maxAngle / max * val);\n  }\n\n  function onMove(e) {\n    if (drag) {\n      let angle = Math.atan2(e.nativeEvent.offsetY - 250, e.nativeEvent.offsetX - 250);\n      let angle2 = angle * (180 / Math.PI); //to 360 range\n\n      if (angle2 < 0) {\n        angle2 = 360 - -angle2;\n      } //set 0 angle\n\n\n      angle2 += 180; //corect angle\n\n      if (angle2 > 360) angle2 -= 360;\n\n      if (angle2 >= 0 && angle2 <= maxAngle) {\n        setCurrentValue(Math.round(max / maxAngle * angle2));\n        setAngleTrans(angle2);\n        setHandAngle(angle2);\n      }\n    }\n  }\n\n  function onDrag(e) {\n    if (!drag) {\n      setDrag(true);\n      if (handle.current) handle.current.style.pointerEvents = \"none\";\n    }\n  }\n\n  function onDragEnd(e) {\n    if (drag) {\n      setDrag(false);\n      if (handle.current) handle.current.style.pointerEvents = \"all\";\n    }\n  }\n\n  useEffect(() => {\n    if (containers) {\n      let angle = Math.round(handAngle);\n\n      if (angle <= maxAngle && angle >= minAngle) {\n        for (let i = 0; i < containers.length; i++) {\n          let containerAngle = parseInt(containers[i].getAttribute('rotate'));\n\n          if (containerAngle > lastNodeAngle && containerAngle <= angle || containerAngle < lastNodeAngle && angle <= containerAngle) {\n            anime({\n              targets: lastNode,\n              scale: [{\n                value: 1,\n                easing: 'easeInOutQuad',\n                duration: 500\n              }],\n              delay: 0\n            });\n            anime({\n              targets: containers[i].childNodes,\n              scale: [{\n                value: 1.5,\n                easing: 'easeOutSine',\n                duration: 500\n              }],\n              delay: 0\n            });\n            setLastNode(containers[i].childNodes[0]);\n            setLastNodeAngle(containerAngle);\n            break;\n          }\n        }\n\n        ;\n        if (hand.current) hand.current.style.transform = \"rotate(\" + angle + \"deg)\";\n      }\n    }\n  }, [handAngle]);\n  useEffect(() => {\n    let anim = {\n      value: angleTrans\n    };\n    anime({\n      targets: anim,\n      value: currentAngle,\n      easing: \"linear\",\n      duration: 500,\n      update: function () {\n        //updateHandAngle(anim.value);\n        setHandAngle(anim.value);\n      },\n      complete: () => {\n        setAngleTrans(currentAngle);\n      }\n    });\n  }, [currentAngle]);\n  useEffect(() => {\n    if (valueInput.current) valueInput.current.value = currentValue.toString();\n    if (!initialize) props.onValueChanged(currentValue.toString());\n  }, [currentValue]);\n  useEffect(() => {\n    let initValue = props.defaultValue;\n\n    if (initValue != undefined) {\n      let j = 0;\n\n      for (let i = 0; i < segCount; i++) {\n        let handAngle = Math.round(maxAngle / max * j);\n        let line = '<div rotate=' + handAngle + ' style=\"transform:rotate(' + handAngle + 'deg)!important;\" style={lineContainerSizes} class=\"lineContainer\"><div class=\"line\"></div></div>';\n        if (lines.current) lines.current.innerHTML += line;\n        j += max / (segCount - 1);\n      }\n\n      let contData = document.getElementsByClassName('lineContainer');\n      let initlastNode = contData[0].childNodes[0];\n      let initLastNodeAngle = 0;\n      anime({\n        targets: contData[0].childNodes[0],\n        scale: [{\n          value: 1.5,\n          easing: 'easeOutSine',\n          duration: 500\n        }],\n        delay: 0\n      });\n      let lineSegs = document.getElementsByClassName(\"line\");\n      const first = [73, 80, 245];\n      const second = [244, 67, 54];\n\n      for (let i = 0; i < lineSegs.length; i++) {\n        var percent = i / (lineSegs.length - 1);\n        var red = first[0] + percent * (second[0] - first[0]);\n        var green = first[1] + percent * (second[1] - first[1]);\n        var blue = first[2] + percent * (second[2] - first[2]);\n        lineSegs[i].setAttribute(\"style\", \"background:\" + \"rgb(\" + red + \",\" + green + \",\" + blue + \");\");\n      }\n\n      ;\n      setContainers(contData);\n\n      const updateHandAngle = angle => {\n        angle = Math.round(angle);\n\n        if (angle <= maxAngle && angle >= minAngle) {\n          for (let i = 0; i < contData.length; i++) {\n            let containerAngle = parseInt(contData[i].getAttribute('rotate'));\n\n            if (containerAngle > initLastNodeAngle && containerAngle <= angle || containerAngle < initLastNodeAngle && angle <= containerAngle) {\n              anime({\n                targets: initlastNode,\n                scale: [{\n                  value: 1,\n                  easing: 'easeInOutQuad',\n                  duration: 500\n                }],\n                delay: 0\n              });\n              anime({\n                targets: contData[i].childNodes,\n                scale: [{\n                  value: 1.5,\n                  easing: 'easeOutSine',\n                  duration: 500\n                }],\n                delay: 0\n              });\n              initlastNode = contData[i].childNodes[0];\n              initLastNodeAngle = containerAngle;\n              break;\n            }\n          }\n\n          ; //document.getElementById(\"hand\").style.transform=\"rotate(\"+(angle)+\"deg)\";\n        }\n      };\n\n      let initAngleTrans = {\n        value: 0\n      };\n      anime({\n        targets: initAngleTrans,\n        value: maxAngle / max * initValue,\n        easing: \"linear\",\n        duration: 500,\n        update: function () {\n          updateHandAngle(initAngleTrans.value);\n        },\n        complete: function () {\n          setLastNode(initlastNode);\n          setLastNodeAngle(initLastNodeAngle);\n\n          if (initValue != undefined) {\n            setCurrentValue(initValue);\n            setCurrentAngle(maxAngle / max * initValue);\n          }\n\n          setInitialize(false);\n        }\n      });\n    }\n  }, [props.defaultValue]);\n  return __jsx(\"div\", {\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"work\",\n    onMouseMove: onMove,\n    onMouseUp: onDragEnd,\n    style: workspaceSizes,\n    className: \"jsx-487617672\" + \" \" + \"workspace\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    id: \"handPath\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 161.45 161.45\",\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253\n    },\n    __self: this\n  }, __jsx(\"defs\", {\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, __jsx(\"style\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }, \".pathcircle{fill:none;stroke:\" + (props.theme == 1 ? \"white\" : \"black\") + \";stroke-miterlimit:10;stroke-opacity:0.08;stroke-width:2px;}\")), __jsx(\"title\", {\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257\n    },\n    __self: this\n  }, \"Datov\\xFD zdroj 22\"), __jsx(\"g\", {\n    id: \"Vrstva_2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }, __jsx(\"g\", {\n    id: \"Vrstva_2-2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259\n    },\n    __self: this\n  }, __jsx(\"circle\", {\n    cx: \"80.73\",\n    cy: \"80.73\",\n    r: \"80.6\",\n    strokeDasharray: \"253\",\n    strokeDashoffset: \"253\",\n    className: \"jsx-487617672\" + \" \" + \"pathcircle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260\n    },\n    __self: this\n  })))), __jsx(\"div\", {\n    ref: lines,\n    id: \"lines\",\n    style: linesSize,\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    ref: hand,\n    id: \"hand\",\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    ref: handle,\n    onMouseDown: onDrag,\n    id: \"handle\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 26.04 26.04\",\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  }, __jsx(\"defs\", {\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268\n    },\n    __self: this\n  }, __jsx(\"style\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269\n    },\n    __self: this\n  }, \".handle{fill:#2196f3;}\")), __jsx(\"title\", {\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, \"Datov\\xFD zdroj 25\"), __jsx(\"g\", {\n    id: \"Vrstva_2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  }, __jsx(\"g\", {\n    id: \"Vrstva_2-2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273\n    },\n    __self: this\n  }, __jsx(\"circle\", {\n    cx: \"13.02\",\n    cy: \"13.02\",\n    r: \"13.02\",\n    className: \"jsx-487617672\" + \" \" + \"handle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  })))))), __jsx(\"input\", {\n    ref: valueInput,\n    onBlur: inputUpdated,\n    type: \"number\",\n    className: \"jsx-487617672\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"487617672\",\n    __self: this\n  }, \".workspace{background:none;margin:auto;position:relative;border-radius:100%;}#lines,#handPath,.lineContainer{pointer-events:none;overflow:visible;}#handPath{width:5rem;height:5rem;}#lines{position:absolute;height:0px;margin-top:50%;}.lineContainer{position:absolute;-webkit-transform-origin:right center;-ms-transform-origin:right center;transform-origin:right center;}.line{height:5px;width:3rem;margin-left:1.5rem;}#handPath{margin:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:absolute;}#hand{margin-top:50%;background:red;-webkit-transform-origin:right center;-ms-transform-origin:right center;transform-origin:right center;position:absolute;height:0;}#handle{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;width:2rem;height:2rem;-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);right:125px;position:absolute;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcSmFrdWIgU2VkbGFrXFxXZWJzdG9ybVByb2plY3RzXFxwcm9qZWt0X0NQIC0gdHlwZXNjcmlwdFxcY29tcG9uZW50c1xcVGVybW9zdGF0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3UitCLEFBRzZDLEFBUU4sQUFJVixBQUlPLEFBT0EsQUFJUCxBQU9DLEFBS0csQUFRRixXQWxDRCxBQWVELEFBT3NCLElBS2xCLENBckNILEVBY0QsQUFPb0IsRUFmZCxFQW9CRSxDQWZwQixLQVZtQixDQWVILENBc0JnQixPQS9CaEMsSUFvQkEsR0FWQSxFQWZvQixHQTJDUixXQUNDLEtBM0NiLE9BNEMrQiw0Q0FkWCxJQVhwQixZQWlCbUIsRUFMbkIsZ0JBT1UsU0FDVixlQU1hLFlBQ00sa0JBQ25CIiwiZmlsZSI6IkM6XFxVc2Vyc1xcSmFrdWIgU2VkbGFrXFxXZWJzdG9ybVByb2plY3RzXFxwcm9qZWt0X0NQIC0gdHlwZXNjcmlwdFxcY29tcG9uZW50c1xcVGVybW9zdGF0LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge3VzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSxNb3VzZUV2ZW50LFN5bnRoZXRpY0V2ZW50fSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGFuaW1lIGZyb20gXCJhbmltZWpzXCI7XHJcbmltcG9ydCB7ZmlyZWJhc2V9IGZyb20gXCIuLi9maXJlYmFzZVwiO1xyXG5pbXBvcnQgSVRlcm1vc3RhdCBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JVGVybW9zdGF0XCI7XHJcbmltcG9ydCB7bnVtYmVyfSBmcm9tIFwicHJvcC10eXBlc1wiO1xyXG5mdW5jdGlvbiBUZXJtb3N0YXQocHJvcHM6SVRlcm1vc3RhdCl7XHJcbiAgICBjb25zdCBtaW4gPSAwO1xyXG4gICAgY29uc3QgbWF4ID0gNTA7XHJcbiAgICBjb25zdCB3aWR0aCA9IDUwMDtcclxuICAgIGNvbnN0IGhlaWdodCA9IDUwMDtcclxuICAgIGNvbnN0IG1pbkFuZ2xlID0gMDtcclxuICAgIGNvbnN0IG1heEFuZ2xlID0gMTgwO1xyXG4gICAgY29uc3Qgc2VnQ291bnQgPSAyMi8vMTE7XHJcblxyXG4gICAgY29uc3QgbGluZXMgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xyXG4gICAgY29uc3QgdmFsdWVJbnB1dCA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcclxuICAgIGNvbnN0IGhhbmQgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xyXG4gICAgY29uc3QgaGFuZGxlID0gdXNlUmVmPFNWR1NWR0VsZW1lbnQ+KG51bGwpO1xyXG5cclxuICAgIGNvbnN0IFtjb250YWluZXJzLHNldENvbnRhaW5lcnNdID0gdXNlU3RhdGU8SFRNTENvbGxlY3Rpb25PZjxFbGVtZW50Pj4oKTtcclxuXHJcbiAgICBjb25zdCBbbGFzdE5vZGUsc2V0TGFzdE5vZGVdID0gdXNlU3RhdGU8Q2hpbGROb2RlPigpO1xyXG4gICAgY29uc3QgW2xhc3ROb2RlQW5nbGUsc2V0TGFzdE5vZGVBbmdsZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xyXG4gICAgY29uc3QgW2FuZ2xlVHJhbnMsc2V0QW5nbGVUcmFuc10gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xyXG4gICAgY29uc3QgW2N1cnJlbnRBbmdsZSxzZXRDdXJyZW50QW5nbGVdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcclxuICAgIGNvbnN0IFtoYW5kQW5nbGUsc2V0SGFuZEFuZ2xlXSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XHJcbiAgICBjb25zdCBbY3VycmVudFZhbHVlLHNldEN1cnJlbnRWYWx1ZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xyXG4gICAgY29uc3QgW2RyYWcsc2V0RHJhZ10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XHJcbiAgICBjb25zdCBbaW5pdGlhbGl6ZSxzZXRJbml0aWFsaXplXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xyXG5cclxuICAgIGNvbnN0IHdvcmtzcGFjZVNpemVzID0ge1xyXG4gICAgICAgIGhlaWdodDpcIjUwMHB4XCIsXHJcbiAgICAgICAgd2lkdGg6XCI1MDBweFwiXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGxpbmVzU2l6ZSA9IHtcclxuICAgICAgICB3aWR0aDpcIjUwMHB4XCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbGluZUNvbnRhaW5lclNpemVzID0ge1xyXG4gICAgICAgIHdpZHRoOiBcIjI1MHB4XCJcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaW5wdXRVcGRhdGVkKGU6YW55KXtcclxuICAgICAgICBsZXQgdmFsID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgc2V0Q3VycmVudFZhbHVlKHZhbCk7XHJcbiAgICAgICAgc2V0Q3VycmVudEFuZ2xlKChtYXhBbmdsZS9tYXgpKnZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25Nb3ZlKGU6TW91c2VFdmVudCl7XHJcbiAgICAgICAgaWYoZHJhZyl7XHJcbiAgICAgICAgICAgIGxldCBhbmdsZSA9IE1hdGguYXRhbjIoZS5uYXRpdmVFdmVudC5vZmZzZXRZLTI1MCwgZS5uYXRpdmVFdmVudC5vZmZzZXRYLTI1MCk7XHJcbiAgICAgICAgICAgIGxldCBhbmdsZTIgPSBhbmdsZSAqICgxODAvTWF0aC5QSSk7XHJcbiAgICAgICAgICAgIC8vdG8gMzYwIHJhbmdlXHJcbiAgICAgICAgICAgIGlmKGFuZ2xlMiA8IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFuZ2xlMiA9IDM2MC0oLWFuZ2xlMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9zZXQgMCBhbmdsZVxyXG4gICAgICAgICAgICBhbmdsZTIrPSAxODA7XHJcbiAgICAgICAgICAgIC8vY29yZWN0IGFuZ2xlXHJcbiAgICAgICAgICAgIGlmKGFuZ2xlMiA+IDM2MClcclxuICAgICAgICAgICAgICAgIGFuZ2xlMi09MzYwXHJcblxyXG4gICAgICAgICAgICBpZihhbmdsZTIgPj0gMCAmJiBhbmdsZTIgPD0gbWF4QW5nbGUpIHtcclxuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWYWx1ZShNYXRoLnJvdW5kKChtYXggLyBtYXhBbmdsZSkgKiBhbmdsZTIpKTtcclxuICAgICAgICAgICAgICAgIHNldEFuZ2xlVHJhbnMoYW5nbGUyKTtcclxuICAgICAgICAgICAgICAgIHNldEhhbmRBbmdsZShhbmdsZTIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uRHJhZyhlOk1vdXNlRXZlbnQpe1xyXG4gICAgICAgIGlmKCFkcmFnKSB7XHJcbiAgICAgICAgICAgIHNldERyYWcodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmKGhhbmRsZS5jdXJyZW50KVxyXG4gICAgICAgICAgICBoYW5kbGUuY3VycmVudC5zdHlsZS5wb2ludGVyRXZlbnRzPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25EcmFnRW5kKGU6TW91c2VFdmVudCl7XHJcbiAgICAgICAgaWYoZHJhZyl7XHJcbiAgICAgICAgICAgIHNldERyYWcoZmFsc2UpO1xyXG4gICAgICAgICAgICBpZihoYW5kbGUuY3VycmVudClcclxuICAgICAgICAgICAgaGFuZGxlLmN1cnJlbnQuc3R5bGUucG9pbnRlckV2ZW50cz1cImFsbFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1c2VFZmZlY3QoKCk9PntcclxuICAgICAgICBpZihjb250YWluZXJzKSB7XHJcbiAgICAgICAgICAgIGxldCBhbmdsZSA9IE1hdGgucm91bmQoaGFuZEFuZ2xlKTtcclxuICAgICAgICAgICAgaWYgKGFuZ2xlIDw9IG1heEFuZ2xlICYmIGFuZ2xlID49IG1pbkFuZ2xlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRhaW5lcnMubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lckFuZ2xlID0gcGFyc2VJbnQoY29udGFpbmVyc1tpXS5nZXRBdHRyaWJ1dGUoJ3JvdGF0ZScpIGFzIHN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjb250YWluZXJBbmdsZSA+IGxhc3ROb2RlQW5nbGUgJiYgY29udGFpbmVyQW5nbGUgPD0gYW5nbGUpIHx8IChjb250YWluZXJBbmdsZSA8IGxhc3ROb2RlQW5nbGUgJiYgYW5nbGUgPD0gY29udGFpbmVyQW5nbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IGxhc3ROb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6IDEsIGVhc2luZzogJ2Vhc2VJbk91dFF1YWQnLCBkdXJhdGlvbjogNTAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogY29udGFpbmVyc1tpXS5jaGlsZE5vZGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6IDEuNSwgZWFzaW5nOiAnZWFzZU91dFNpbmUnLCBkdXJhdGlvbjogNTAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdE5vZGUoY29udGFpbmVyc1tpXS5jaGlsZE5vZGVzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdE5vZGVBbmdsZShjb250YWluZXJBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICBpZihoYW5kLmN1cnJlbnQpXHJcbiAgICAgICAgICAgICAgICBoYW5kLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGUoXCIgKyAoYW5nbGUpICsgXCJkZWcpXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFtoYW5kQW5nbGVdKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCk9PntcclxuICAgICAgICBsZXQgYW5pbSA9IHtcclxuICAgICAgICAgICAgdmFsdWU6YW5nbGVUcmFuc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgdGFyZ2V0czphbmltLFxyXG4gICAgICAgICAgICB2YWx1ZTooY3VycmVudEFuZ2xlKSxcclxuICAgICAgICAgICAgZWFzaW5nOlwibGluZWFyXCIsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOjUwMCxcclxuICAgICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAvL3VwZGF0ZUhhbmRBbmdsZShhbmltLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHNldEhhbmRBbmdsZShhbmltLnZhbHVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tcGxldGU6KCk9PntcclxuICAgICAgICAgICAgICAgIHNldEFuZ2xlVHJhbnMoY3VycmVudEFuZ2xlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxbY3VycmVudEFuZ2xlXSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpPT57XHJcbiAgICAgICAgaWYodmFsdWVJbnB1dC5jdXJyZW50KVxyXG4gICAgICAgIHZhbHVlSW5wdXQuY3VycmVudC52YWx1ZSA9IGN1cnJlbnRWYWx1ZS50b1N0cmluZygpO1xyXG4gICAgICAgIGlmKCFpbml0aWFsaXplKVxyXG4gICAgICAgIHByb3BzLm9uVmFsdWVDaGFuZ2VkKGN1cnJlbnRWYWx1ZS50b1N0cmluZygpKTtcclxuICAgIH0sW2N1cnJlbnRWYWx1ZV0pO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKT0+e1xyXG4gICAgICAgIGxldCBpbml0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgaWYoaW5pdFZhbHVlIT11bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IGogPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBoYW5kQW5nbGUgPSBNYXRoLnJvdW5kKChtYXhBbmdsZSAvIG1heCkgKiBqKTtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5lID0gJzxkaXYgcm90YXRlPScgKyBoYW5kQW5nbGUgKyAnIHN0eWxlPVwidHJhbnNmb3JtOnJvdGF0ZSgnICsgaGFuZEFuZ2xlICsgJ2RlZykhaW1wb3J0YW50O1wiIHN0eWxlPXtsaW5lQ29udGFpbmVyU2l6ZXN9IGNsYXNzPVwibGluZUNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJsaW5lXCI+PC9kaXY+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGlmIChsaW5lcy5jdXJyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzLmN1cnJlbnQuaW5uZXJIVE1MICs9IGxpbmU7XHJcbiAgICAgICAgICAgICAgICBqICs9IG1heCAvIChzZWdDb3VudCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgY29udERhdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdsaW5lQ29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIGxldCBpbml0bGFzdE5vZGUgPSBjb250RGF0YVswXS5jaGlsZE5vZGVzWzBdO1xyXG4gICAgICAgICAgICBsZXQgaW5pdExhc3ROb2RlQW5nbGUgPSAwO1xyXG4gICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiBjb250RGF0YVswXS5jaGlsZE5vZGVzWzBdLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IFtcclxuICAgICAgICAgICAgICAgICAgICB7dmFsdWU6IDEuNSwgZWFzaW5nOiAnZWFzZU91dFNpbmUnLCBkdXJhdGlvbjogNTAwfVxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBsaW5lU2VncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsaW5lXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBmaXJzdCA9IFs3MywgODAsIDI0NV07XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IFsyNDQsIDY3LCA1NF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVTZWdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVyY2VudCA9ICgoaSkgLyAobGluZVNlZ3MubGVuZ3RoIC0gMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByZWQgPSBmaXJzdFswXSArIHBlcmNlbnQgKiAoc2Vjb25kWzBdIC0gZmlyc3RbMF0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyZWVuID0gZmlyc3RbMV0gKyBwZXJjZW50ICogKHNlY29uZFsxXSAtIGZpcnN0WzFdKTtcclxuICAgICAgICAgICAgICAgIHZhciBibHVlID0gZmlyc3RbMl0gKyBwZXJjZW50ICogKHNlY29uZFsyXSAtIGZpcnN0WzJdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsaW5lU2Vnc1tpXS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQ6XCIgKyBcInJnYihcIiArIHJlZCArIFwiLFwiICsgZ3JlZW4gKyBcIixcIiArIGJsdWUgKyBcIik7XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDtcclxuXHJcbiAgICAgICAgICAgIHNldENvbnRhaW5lcnMoY29udERhdGEpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVIYW5kQW5nbGUgPSAoYW5nbGU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgYW5nbGUgPSBNYXRoLnJvdW5kKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYW5nbGUgPD0gbWF4QW5nbGUgJiYgYW5nbGUgPj0gbWluQW5nbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnREYXRhLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGFpbmVyQW5nbGUgPSBwYXJzZUludChjb250RGF0YVtpXS5nZXRBdHRyaWJ1dGUoJ3JvdGF0ZScpIGFzIHN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY29udGFpbmVyQW5nbGUgPiBpbml0TGFzdE5vZGVBbmdsZSAmJiBjb250YWluZXJBbmdsZSA8PSBhbmdsZSkgfHwgKGNvbnRhaW5lckFuZ2xlIDwgaW5pdExhc3ROb2RlQW5nbGUgJiYgYW5nbGUgPD0gY29udGFpbmVyQW5nbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogaW5pdGxhc3ROb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogMSwgZWFzaW5nOiAnZWFzZUluT3V0UXVhZCcsIGR1cmF0aW9uOiA1MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IGNvbnREYXRhW2ldLmNoaWxkTm9kZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAxLjUsIGVhc2luZzogJ2Vhc2VPdXRTaW5lJywgZHVyYXRpb246IDUwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0bGFzdE5vZGUgPSBjb250RGF0YVtpXS5jaGlsZE5vZGVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdExhc3ROb2RlQW5nbGUgPSBjb250YWluZXJBbmdsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhhbmRcIikuc3R5bGUudHJhbnNmb3JtPVwicm90YXRlKFwiKyhhbmdsZSkrXCJkZWcpXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgaW5pdEFuZ2xlVHJhbnMgPSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiBpbml0QW5nbGVUcmFucyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAoKG1heEFuZ2xlIC8gbWF4KSAqIGluaXRWYWx1ZSksXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6IFwibGluZWFyXCIsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlSGFuZEFuZ2xlKGluaXRBbmdsZVRyYW5zLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldExhc3ROb2RlKGluaXRsYXN0Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TGFzdE5vZGVBbmdsZShpbml0TGFzdE5vZGVBbmdsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGluaXRWYWx1ZSE9dW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWYWx1ZShpbml0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50QW5nbGUoKG1heEFuZ2xlIC8gbWF4KSAqIGluaXRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRJbml0aWFsaXplKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxbcHJvcHMuZGVmYXVsdFZhbHVlXSk7XHJcblxyXG4gICAgcmV0dXJuKFxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJ3b3JrXCIgb25Nb3VzZU1vdmU9e29uTW92ZX0gb25Nb3VzZVVwPXtvbkRyYWdFbmR9IHN0eWxlPXt3b3Jrc3BhY2VTaXplc30gY2xhc3NOYW1lPVwid29ya3NwYWNlXCI+XHJcbiAgICAgICAgICAgICAgICA8c3ZnIGlkPVwiaGFuZFBhdGhcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxNjEuNDUgMTYxLjQ1XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRlZnM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZT57XCIucGF0aGNpcmNsZXtmaWxsOm5vbmU7c3Ryb2tlOlwiKyhwcm9wcy50aGVtZT09MT9cIndoaXRlXCI6XCJibGFja1wiKStcIjtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2Utb3BhY2l0eTowLjA4O3N0cm9rZS13aWR0aDoycHg7fVwifTwvc3R5bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aXRsZT5EYXRvdsO9IHpkcm9qIDIyPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICA8ZyBpZD1cIlZyc3R2YV8yXCIgZGF0YS1uYW1lPVwiVnJzdHZhIDJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9XCJWcnN0dmFfMi0yXCIgZGF0YS1uYW1lPVwiVnJzdHZhIDJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3NOYW1lPVwicGF0aGNpcmNsZVwiIGN4PVwiODAuNzNcIiBjeT1cIjgwLjczXCIgcj1cIjgwLjZcIiBzdHJva2VEYXNoYXJyYXk9XCIyNTNcIiBzdHJva2VEYXNob2Zmc2V0PVwiMjUzXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17bGluZXN9IGlkPVwibGluZXNcIiBzdHlsZT17bGluZXNTaXplfT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiByZWY9e2hhbmR9IGlkPVwiaGFuZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzdmcgcmVmPXtoYW5kbGV9IG9uTW91c2VEb3duPXtvbkRyYWd9IGlkPVwiaGFuZGxlXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjYuMDQgMjYuMDRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRlZnM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGU+e1wiLmhhbmRsZXtmaWxsOiMyMTk2ZjM7fVwifTwvc3R5bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGVmcz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPkRhdG92w70gemRyb2ogMjU8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD1cIlZyc3R2YV8yXCIgZGF0YS1uYW1lPVwiVnJzdHZhIDJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPVwiVnJzdHZhXzItMlwiIGRhdGEtbmFtZT1cIlZyc3R2YSAyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJoYW5kbGVcIiBjeD1cIjEzLjAyXCIgY3k9XCIxMy4wMlwiIHI9XCIxMy4wMlwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8aW5wdXQgcmVmPXt2YWx1ZUlucHV0fSBvbkJsdXI9e2lucHV0VXBkYXRlZH0gdHlwZSA9IFwibnVtYmVyXCI+PC9pbnB1dD5cclxuICAgICAgICAgICAgPHN0eWxlIGpzeCBnbG9iYWw+e2BcclxuICAgICAgICAgICAgICAgIC53b3Jrc3BhY2V7XHJcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6LyojMjEyMTIxKi9ub25lO1xyXG4gICAgICAgICAgICAgICAgICAvL2hlaWdodDo1MDBweDtcclxuICAgICAgICAgICAgICAgICAgLy93aWR0aDo1MDBweDtcclxuICAgICAgICAgICAgICAgICAgbWFyZ2luOmF1dG87XHJcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOjEwMCU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAjbGluZXMsI2hhbmRQYXRoLC5saW5lQ29udGFpbmVye1xyXG4gICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6dmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICNoYW5kUGF0aHtcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6NXJlbTtcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OjVyZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAjbGluZXN7XHJcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6MHB4O1xyXG4gICAgICAgICAgICAgICAgICAvL3dpZHRoOjUwMHB4O1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOjUwJTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5saW5lQ29udGFpbmVye1xyXG4gICAgICAgICAgICAgICAgICAvL3dpZHRoOiAyNTBweDtcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5saW5le1xyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6NXB4O1xyXG4gICAgICAgICAgICAgICAgICB3aWR0aDozcmVtO1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDoxLjVyZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAjaGFuZFBhdGh7XHJcbiAgICAgICAgICAgICAgICAgIC8vd2lkdGg6IDI1MHB4O1xyXG4gICAgICAgICAgICAgICAgICAvL2hlaWdodDogMjUwcHg7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogNTAlO1xyXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgI2hhbmR7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6NTAlO1xyXG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnJlZDtcclxuICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgLy93aWR0aDoyNTBweDtcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAjaGFuZGxle1xyXG4gICAgICAgICAgICAgICAgICBjdXJzb3I6IGdyYWI7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOjJyZW07XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDoycmVtO1xyXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKDUwJSwtNTAlKTtcclxuICAgICAgICAgICAgICAgICAgcmlnaHQ6MTI1cHg7XHJcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRlcm1vc3RhdDsiXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Jakub Sedlak\\\\\\\\WebstormProjects\\\\\\\\projekt_CP - typescript\\\\\\\\components\\\\\\\\Termostat.tsx */\"));\n}\n\nexport default Termostat;","map":{"version":3,"sources":["C:/Users/Jakub Sedlak/WebstormProjects/projekt_CP - typescript/components/Termostat.tsx"],"names":["React","useEffect","useRef","useState","anime","Termostat","props","min","max","width","height","minAngle","maxAngle","segCount","lines","valueInput","hand","handle","containers","setContainers","lastNode","setLastNode","lastNodeAngle","setLastNodeAngle","angleTrans","setAngleTrans","currentAngle","setCurrentAngle","handAngle","setHandAngle","currentValue","setCurrentValue","drag","setDrag","initialize","setInitialize","workspaceSizes","linesSize","lineContainerSizes","inputUpdated","e","val","target","value","onMove","angle","Math","atan2","nativeEvent","offsetY","offsetX","angle2","PI","round","onDrag","current","style","pointerEvents","onDragEnd","i","length","containerAngle","parseInt","getAttribute","targets","scale","easing","duration","delay","childNodes","transform","anim","update","complete","toString","onValueChanged","initValue","defaultValue","undefined","j","line","innerHTML","contData","document","getElementsByClassName","initlastNode","initLastNodeAngle","lineSegs","first","second","percent","red","green","blue","setAttribute","updateHandAngle","initAngleTrans","theme"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState,MouseEvent,SyntheticEvent} from \"react\";\r\nimport anime from \"animejs\";\r\nimport {firebase} from \"../firebase\";\r\nimport ITermostat from \"../interfaces/ITermostat\";\r\nimport {number} from \"prop-types\";\r\nfunction Termostat(props:ITermostat){\r\n    const min = 0;\r\n    const max = 50;\r\n    const width = 500;\r\n    const height = 500;\r\n    const minAngle = 0;\r\n    const maxAngle = 180;\r\n    const segCount = 22//11;\r\n\r\n    const lines = useRef<HTMLDivElement>(null);\r\n    const valueInput = useRef<HTMLInputElement>(null);\r\n    const hand = useRef<HTMLDivElement>(null);\r\n    const handle = useRef<SVGSVGElement>(null);\r\n\r\n    const [containers,setContainers] = useState<HTMLCollectionOf<Element>>();\r\n\r\n    const [lastNode,setLastNode] = useState<ChildNode>();\r\n    const [lastNodeAngle,setLastNodeAngle] = useState<number>(0);\r\n    const [angleTrans,setAngleTrans] = useState<number>(0);\r\n    const [currentAngle,setCurrentAngle] = useState<number>(0);\r\n    const [handAngle,setHandAngle] = useState<number>(0);\r\n    const [currentValue,setCurrentValue] = useState<number>(0);\r\n    const [drag,setDrag] = useState<boolean>(false);\r\n    const [initialize,setInitialize] = useState<boolean>(true);\r\n\r\n    const workspaceSizes = {\r\n        height:\"500px\",\r\n        width:\"500px\"\r\n    };\r\n\r\n    const linesSize = {\r\n        width:\"500px\"\r\n    };\r\n\r\n    const lineContainerSizes = {\r\n        width: \"250px\"\r\n    };\r\n\r\n    function inputUpdated(e:any){\r\n        let val = e.target.value;\r\n        setCurrentValue(val);\r\n        setCurrentAngle((maxAngle/max)*val);\r\n    }\r\n\r\n    function onMove(e:MouseEvent){\r\n        if(drag){\r\n            let angle = Math.atan2(e.nativeEvent.offsetY-250, e.nativeEvent.offsetX-250);\r\n            let angle2 = angle * (180/Math.PI);\r\n            //to 360 range\r\n            if(angle2 < 0)\r\n            {\r\n                angle2 = 360-(-angle2);\r\n            }\r\n            //set 0 angle\r\n            angle2+= 180;\r\n            //corect angle\r\n            if(angle2 > 360)\r\n                angle2-=360\r\n\r\n            if(angle2 >= 0 && angle2 <= maxAngle) {\r\n                setCurrentValue(Math.round((max / maxAngle) * angle2));\r\n                setAngleTrans(angle2);\r\n                setHandAngle(angle2);\r\n            }\r\n        }\r\n    }\r\n\r\n    function onDrag(e:MouseEvent){\r\n        if(!drag) {\r\n            setDrag(true);\r\n            if(handle.current)\r\n            handle.current.style.pointerEvents= \"none\";\r\n        }\r\n    }\r\n\r\n    function onDragEnd(e:MouseEvent){\r\n        if(drag){\r\n            setDrag(false);\r\n            if(handle.current)\r\n            handle.current.style.pointerEvents=\"all\";\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(containers) {\r\n            let angle = Math.round(handAngle);\r\n            if (angle <= maxAngle && angle >= minAngle) {\r\n                for (let i = 0; i < containers.length; i++) {\r\n\r\n                    let containerAngle = parseInt(containers[i].getAttribute('rotate') as string);\r\n                    if ((containerAngle > lastNodeAngle && containerAngle <= angle) || (containerAngle < lastNodeAngle && angle <= containerAngle)) {\r\n                        anime({\r\n                            targets: lastNode,\r\n                            scale: [\r\n                                {value: 1, easing: 'easeInOutQuad', duration: 500}\r\n                            ],\r\n                            delay: 0,\r\n                        });\r\n                        anime({\r\n                            targets: containers[i].childNodes,\r\n                            scale: [\r\n                                {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n                            ],\r\n                            delay: 0,\r\n                        });\r\n                        setLastNode(containers[i].childNodes[0]);\r\n                        setLastNodeAngle(containerAngle);\r\n                        break;\r\n                    }\r\n\r\n                }\r\n                ;\r\n                if(hand.current)\r\n                hand.current.style.transform = \"rotate(\" + (angle) + \"deg)\";\r\n            }\r\n        }\r\n    },[handAngle]);\r\n\r\n    useEffect(()=>{\r\n        let anim = {\r\n            value:angleTrans\r\n        };\r\n\r\n        anime({\r\n            targets:anim,\r\n            value:(currentAngle),\r\n            easing:\"linear\",\r\n            duration:500,\r\n            update:function(){\r\n                //updateHandAngle(anim.value);\r\n                setHandAngle(anim.value);\r\n            },\r\n            complete:()=>{\r\n                setAngleTrans(currentAngle);\r\n            }\r\n        });\r\n    },[currentAngle]);\r\n\r\n    useEffect(()=>{\r\n        if(valueInput.current)\r\n        valueInput.current.value = currentValue.toString();\r\n        if(!initialize)\r\n        props.onValueChanged(currentValue.toString());\r\n    },[currentValue]);\r\n\r\n    useEffect(()=>{\r\n        let initValue = props.defaultValue;\r\n        if(initValue!=undefined) {\r\n            let j = 0;\r\n            for (let i = 0; i < segCount; i++) {\r\n                let handAngle = Math.round((maxAngle / max) * j);\r\n                let line = '<div rotate=' + handAngle + ' style=\"transform:rotate(' + handAngle + 'deg)!important;\" style={lineContainerSizes} class=\"lineContainer\"><div class=\"line\"></div></div>';\r\n                if (lines.current)\r\n                    lines.current.innerHTML += line;\r\n                j += max / (segCount - 1);\r\n            }\r\n\r\n            let contData = document.getElementsByClassName('lineContainer');\r\n            let initlastNode = contData[0].childNodes[0];\r\n            let initLastNodeAngle = 0;\r\n            anime({\r\n                targets: contData[0].childNodes[0],\r\n                scale: [\r\n                    {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n                ],\r\n                delay: 0,\r\n            });\r\n\r\n            let lineSegs = document.getElementsByClassName(\"line\");\r\n            const first = [73, 80, 245];\r\n            const second = [244, 67, 54];\r\n\r\n            for (let i = 0; i < lineSegs.length; i++) {\r\n                var percent = ((i) / (lineSegs.length - 1));\r\n\r\n                var red = first[0] + percent * (second[0] - first[0]);\r\n                var green = first[1] + percent * (second[1] - first[1]);\r\n                var blue = first[2] + percent * (second[2] - first[2]);\r\n\r\n                lineSegs[i].setAttribute(\"style\", \"background:\" + \"rgb(\" + red + \",\" + green + \",\" + blue + \");\");\r\n            }\r\n            ;\r\n\r\n            setContainers(contData);\r\n            const updateHandAngle = (angle: number) => {\r\n                angle = Math.round(angle);\r\n\r\n                if (angle <= maxAngle && angle >= minAngle) {\r\n                    for (let i = 0; i < contData.length; i++) {\r\n\r\n                        let containerAngle = parseInt(contData[i].getAttribute('rotate') as string);\r\n                        if ((containerAngle > initLastNodeAngle && containerAngle <= angle) || (containerAngle < initLastNodeAngle && angle <= containerAngle)) {\r\n                            anime({\r\n                                targets: initlastNode,\r\n                                scale: [\r\n                                    {value: 1, easing: 'easeInOutQuad', duration: 500}\r\n                                ],\r\n                                delay: 0,\r\n                            });\r\n                            anime({\r\n                                targets: contData[i].childNodes,\r\n                                scale: [\r\n                                    {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n                                ],\r\n                                delay: 0,\r\n                            });\r\n                            initlastNode = contData[i].childNodes[0];\r\n                            initLastNodeAngle = containerAngle;\r\n                            break;\r\n                        }\r\n\r\n                    }\r\n                    ;\r\n                    //document.getElementById(\"hand\").style.transform=\"rotate(\"+(angle)+\"deg)\";\r\n                }\r\n            };\r\n\r\n            let initAngleTrans = {\r\n                value: 0\r\n            }\r\n\r\n            anime({\r\n                targets: initAngleTrans,\r\n                value: ((maxAngle / max) * initValue),\r\n                easing: \"linear\",\r\n                duration: 500,\r\n                update: function () {\r\n                    updateHandAngle(initAngleTrans.value);\r\n                },\r\n                complete: function () {\r\n                    setLastNode(initlastNode);\r\n                    setLastNodeAngle(initLastNodeAngle);\r\n\r\n                    if(initValue!=undefined) {\r\n                        setCurrentValue(initValue);\r\n                        setCurrentAngle((maxAngle / max) * initValue);\r\n                    }\r\n\r\n                    setInitialize(false);\r\n                }\r\n            });\r\n        }\r\n    },[props.defaultValue]);\r\n\r\n    return(\r\n        <div>\r\n            <div id=\"work\" onMouseMove={onMove} onMouseUp={onDragEnd} style={workspaceSizes} className=\"workspace\">\r\n                <svg id=\"handPath\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 161.45 161.45\">\r\n                    <defs>\r\n                        <style>{\".pathcircle{fill:none;stroke:\"+(props.theme==1?\"white\":\"black\")+\";stroke-miterlimit:10;stroke-opacity:0.08;stroke-width:2px;}\"}</style>\r\n                    </defs>\r\n                    <title>Datov zdroj 22</title>\r\n                    <g id=\"Vrstva_2\" data-name=\"Vrstva 2\">\r\n                        <g id=\"Vrstva_2-2\" data-name=\"Vrstva 2\">\r\n                            <circle className=\"pathcircle\" cx=\"80.73\" cy=\"80.73\" r=\"80.6\" strokeDasharray=\"253\" strokeDashoffset=\"253\"/>\r\n                        </g>\r\n                    </g>\r\n                </svg>\r\n                <div ref={lines} id=\"lines\" style={linesSize}>\r\n                </div>\r\n                <div ref={hand} id=\"hand\">\r\n                    <svg ref={handle} onMouseDown={onDrag} id=\"handle\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26.04 26.04\">\r\n                        <defs>\r\n                            <style>{\".handle{fill:#2196f3;}\"}</style>\r\n                        </defs>\r\n                        <title>Datov zdroj 25</title>\r\n                        <g id=\"Vrstva_2\" data-name=\"Vrstva 2\">\r\n                            <g id=\"Vrstva_2-2\" data-name=\"Vrstva 2\">\r\n                                <circle className=\"handle\" cx=\"13.02\" cy=\"13.02\" r=\"13.02\"/>\r\n                            </g>\r\n                        </g>\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n            <input ref={valueInput} onBlur={inputUpdated} type = \"number\"></input>\r\n            <style jsx global>{`\r\n                .workspace{\r\n                  background:/*#212121*/none;\r\n                  //height:500px;\r\n                  //width:500px;\r\n                  margin:auto;\r\n                  position:relative;\r\n                  border-radius:100%;\r\n                }\r\n                #lines,#handPath,.lineContainer{\r\n                  pointer-events: none;\r\n                  overflow:visible;\r\n                }\r\n                #handPath{\r\n                  width:5rem;\r\n                  height:5rem;\r\n                }\r\n                #lines{\r\n                  position:absolute;\r\n                  height:0px;\r\n                  //width:500px;\r\n                  margin-top:50%;\r\n                }\r\n                .lineContainer{\r\n                  //width: 250px;\r\n                  position:absolute;\r\n                  transform-origin: right center;\r\n                }\r\n                .line{\r\n                  height:5px;\r\n                  width:3rem;\r\n                  margin-left:1.5rem;\r\n                }\r\n                #handPath{\r\n                  //width: 250px;\r\n                  //height: 250px;\r\n                  margin: 50%;\r\n                  transform: translate(-50%, -50%);\r\n                  position: absolute;\r\n                }\r\n                #hand{\r\n                  margin-top:50%;\r\n                  background:red;\r\n                  transform-origin: right center;\r\n                  position:absolute;\r\n                  //width:250px;\r\n                  height:0;\r\n                }\r\n                #handle{\r\n                  cursor: grab;\r\n                  width:2rem;\r\n                  height:2rem;\r\n                  transform:translate(50%,-50%);\r\n                  right:125px;\r\n                  position:absolute;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Termostat;"]},"metadata":{},"sourceType":"module"}