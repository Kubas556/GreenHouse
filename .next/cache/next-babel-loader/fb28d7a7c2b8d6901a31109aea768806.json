{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Number$parseInt from \"@babel/runtime-corejs2/core-js/number/parse-int\";\nvar _jsxFileName = \"C:\\\\Users\\\\Jakub Sedlak\\\\WebstormProjects\\\\projekt_CP - typescript\\\\components\\\\Termostat.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef, useState } from \"react\";\nimport anime from \"animejs\";\nimport { useTheme } from \"@material-ui/styles\";\n\nfunction Termostat(props) {\n  var min = 0;\n  var max = 50;\n  var componentWidth = 337;\n  var componentHeight = 337;\n  var minAngle = 0;\n  var maxAngle = 270;\n  var angleOverlap = (maxAngle - 180) / 2;\n  var lineSegCount = 25; //11;\n\n  var valueLineSegCount = 16 * 2 + 1;\n  var valueLineSegBigEach = 8;\n  var theme = useTheme(); // @ts-ignore\n\n  var handleColor = theme.palette.primary.main;\n  var lines = useRef(null);\n  var valueInput = useRef(null);\n  var hand = useRef(null);\n  var handle = useRef(null);\n\n  var _useState = useState(),\n      containers = _useState[0],\n      setContainers = _useState[1];\n\n  var _useState2 = useState(),\n      lastNode = _useState2[0],\n      setLastNode = _useState2[1];\n\n  var _useState3 = useState(0),\n      lastNodeAngle = _useState3[0],\n      setLastNodeAngle = _useState3[1];\n\n  var _useState4 = useState(0),\n      angleTrans = _useState4[0],\n      setAngleTrans = _useState4[1];\n\n  var _useState5 = useState(0),\n      currentAngle = _useState5[0],\n      setCurrentAngle = _useState5[1];\n\n  var _useState6 = useState(0),\n      handAngle = _useState6[0],\n      setHandAngle = _useState6[1];\n\n  var _useState7 = useState(0),\n      currentValue = _useState7[0],\n      setCurrentValue = _useState7[1];\n\n  var _useState8 = useState(false),\n      drag = _useState8[0],\n      setDrag = _useState8[1];\n\n  var _useState9 = useState(true),\n      initialize = _useState9[0],\n      setInitialize = _useState9[1];\n\n  var workspaceSize = {\n    height: componentHeight + \"px\",\n    width: componentWidth + \"px\"\n  };\n  var linesSize = {\n    width: componentWidth + \"px\"\n  };\n  var lineContainerSizes = {\n    width: componentWidth / 2 + \"px\"\n  };\n  var handPathSize = {\n    width: componentWidth / 3 + \"px\",\n    height: componentHeight / 3 + \"px\"\n  };\n  var handSize = {\n    width: componentWidth / 2 + \"px\"\n  };\n  var handleSize = {\n    right: componentWidth / 2 / 3 + \"px\"\n  };\n  var handPathCircle = {\n    circleRadius: 2 * Math.PI * 80.6,\n    transform: \"rotate(\" + -angleOverlap + \"deg)\",\n    maxRadius: 2 * Math.PI * 80.6 - 2 * Math.PI * 80.6 / 360 * maxAngle\n  };\n\n  function inputUpdated(e) {\n    var val = _Number$parseInt(e.target.innerHTML);\n\n    setCurrentValue(val);\n    setCurrentAngle(maxAngle / max * val - angleOverlap);\n  }\n\n  function onMove(e) {\n    if (drag) {\n      var angle = Math.atan2(e.nativeEvent.offsetY - componentHeight / 2, e.nativeEvent.offsetX - componentWidth / 2);\n      var angle2 = angle * (180 / Math.PI); //to 360 range\n\n      if (angle2 < 0) {\n        angle2 = 360 - -angle2;\n      } //set 0 angle\n\n\n      angle2 += 180; //corect angle\n\n      if (angle2 > 360) angle2 -= 360;\n      angle2 = maxAngle - angle2;\n      if (angle2 < 0) angle2 = angleOverlap - (360 - maxAngle + angle2);else angle2 = -(angle2 - maxAngle - angleOverlap);\n\n      if (angle2 >= minAngle && angle2 <= maxAngle) {\n        setCurrentValue(Math.round(max / maxAngle * angle2));\n        setAngleTrans(angle2 - angleOverlap);\n        setHandAngle(angle2 - angleOverlap);\n      }\n    }\n  }\n\n  function onDrag(e) {\n    if (!drag) {\n      setDrag(true);\n      if (handle.current) handle.current.style.pointerEvents = \"none\";\n    }\n  }\n\n  function onDragEnd(e) {\n    if (drag) {\n      setDrag(false);\n      if (handle.current) handle.current.style.pointerEvents = \"all\";\n    }\n  }\n\n  useEffect(function () {\n    if (containers) {\n      var angle = Math.round(handAngle);\n\n      if (angle <= maxAngle && angle >= minAngle - angleOverlap) {\n        for (var i = 0; i < containers.length; i++) {\n          var containerAngle = _parseInt(containers[i].getAttribute('rotate'));\n\n          if (containerAngle > lastNodeAngle && containerAngle <= angle || containerAngle < lastNodeAngle && angle <= containerAngle) {\n            anime({\n              targets: lastNode,\n              scale: [{\n                value: 1,\n                easing: 'easeInOutQuad',\n                duration: 500\n              }],\n              delay: 0\n            });\n            anime({\n              targets: containers[i].childNodes[0],\n              scale: [{\n                value: 1.5,\n                easing: 'easeOutSine',\n                duration: 500\n              }],\n              delay: 0\n            });\n            setLastNode(containers[i].childNodes[0]);\n            setLastNodeAngle(containerAngle);\n            break;\n          }\n        }\n\n        ;\n        if (hand.current) hand.current.style.transform = \"rotate(\" + angle + \"deg)\";\n      }\n    }\n  }, [handAngle]);\n  useEffect(function () {\n    var anim = {\n      value: angleTrans\n    };\n    anime({\n      targets: anim,\n      value: currentAngle,\n      easing: \"linear\",\n      duration: 500,\n      update: function update() {\n        //updateHandAngle(anim.value);\n        setHandAngle(anim.value);\n      },\n      complete: function complete() {\n        setAngleTrans(currentAngle);\n      }\n    });\n  }, [currentAngle]);\n  useEffect(function () {\n    if (valueInput.current) valueInput.current.innerHTML = currentValue.toString();\n    if (!initialize) props.onValueChanged(_Number$parseInt(currentValue.toString()));\n  }, [currentValue]);\n  useEffect(function () {\n    var initValue = props.defaultValue;\n\n    if (initValue != undefined) {\n      var k = 0;\n\n      for (var i = 0; i < valueLineSegCount; i++) {\n        var _handAngle = Math.round(maxAngle / max * k) - angleOverlap;\n\n        var line = '<div style=\"transform:rotate(' + _handAngle + 'deg)!important;width:' + lineContainerSizes.width + ';\" class=\"valueLineContainer\">' + '<div class=\"valueLineGroup\">' + '<div class=' + (i % valueLineSegBigEach == 0 ? \"bigValueLine\" : \"smallValueLine\") + '></div>' + '<div class=\"value\" style=\"transform:rotate(' + -_handAngle + 'deg)\">' + (i % valueLineSegBigEach == 0 ? Math.round(k) : \"\") + '</div>' + '</div>' + '</div>';\n        if (lines.current) lines.current.innerHTML += line;\n        k += max / (valueLineSegCount - 1);\n      }\n\n      var j = 0;\n\n      for (var _i = 0; _i < lineSegCount; _i++) {\n        var _handAngle2 = Math.round(maxAngle / max * j) - angleOverlap;\n\n        var _line = '<div rotate=' + _handAngle2 + ' style=\"transform:rotate(' + _handAngle2 + 'deg)!important;width:' + lineContainerSizes.width + ';\" class=\"lineContainer\">' + '<div class=\"line\"></div>' + '</div>';\n\n        if (lines.current) lines.current.innerHTML += _line;\n        j += max / (lineSegCount - 1);\n      }\n\n      var contData = document.getElementsByClassName('lineContainer');\n      var initlastNode = contData[0].childNodes[0];\n      var initLastNodeAngle = 0;\n      anime({\n        targets: contData[0].childNodes[0],\n        scale: [{\n          value: 1.5,\n          easing: 'easeOutSine',\n          duration: 500\n        }],\n        delay: 0\n      });\n      var lineSegs = document.getElementsByClassName(\"line\");\n      var first = [73, 80, 245];\n      var second = [244, 67, 54];\n\n      for (var _i2 = 0; _i2 < lineSegs.length; _i2++) {\n        var percent = _i2 / (lineSegs.length - 1);\n        var red = first[0] + percent * (second[0] - first[0]);\n        var green = first[1] + percent * (second[1] - first[1]);\n        var blue = first[2] + percent * (second[2] - first[2]);\n\n        lineSegs[_i2].setAttribute(\"style\", \"background:\" + \"rgb(\" + red + \",\" + green + \",\" + blue + \");\");\n      }\n\n      ;\n      setContainers(contData);\n\n      var updateHandAngle = function updateHandAngle(angle) {\n        angle = Math.round(angle);\n\n        if (angle <= maxAngle && angle >= minAngle) {\n          for (var _i3 = 0; _i3 < contData.length; _i3++) {\n            var containerAngle = _parseInt(contData[_i3].getAttribute('rotate'));\n\n            if (containerAngle > initLastNodeAngle && containerAngle <= angle || containerAngle < initLastNodeAngle && angle <= containerAngle) {\n              anime({\n                targets: initlastNode,\n                scale: [{\n                  value: 1,\n                  easing: 'easeInOutQuad',\n                  duration: 500\n                }],\n                delay: 0\n              });\n              anime({\n                targets: contData[_i3].childNodes[0],\n                scale: [{\n                  value: 1.5,\n                  easing: 'easeOutSine',\n                  duration: 500\n                }],\n                delay: 0\n              });\n              initlastNode = contData[_i3].childNodes[0];\n              initLastNodeAngle = containerAngle;\n              break;\n            }\n          }\n\n          ; //document.getElementById(\"hand\").style.transform=\"rotate(\"+(angle)+\"deg)\";\n        }\n      };\n\n      var initAngleTrans = {\n        value: 0\n      };\n      anime({\n        targets: initAngleTrans,\n        value: maxAngle / max * initValue,\n        easing: \"linear\",\n        duration: 500,\n        update: function update() {\n          updateHandAngle(initAngleTrans.value);\n        },\n        complete: function complete() {\n          setLastNode(initlastNode);\n          setLastNodeAngle(initLastNodeAngle);\n\n          if (initValue != undefined) {\n            setCurrentValue(initValue);\n            setCurrentAngle(maxAngle / max * initValue - angleOverlap);\n          }\n\n          setInitialize(false);\n        }\n      });\n    }\n  }, [props.defaultValue]);\n  return __jsx(\"div\", {\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"work\",\n    onMouseMove: onMove,\n    onMouseUp: onDragEnd,\n    style: workspaceSize,\n    className: \"jsx-1771400329\" + \" \" + \"workspace\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    id: \"handPath\",\n    style: handPathSize,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 161.45 161.45\",\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, __jsx(\"defs\", {\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303\n    },\n    __self: this\n  }, __jsx(\"style\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304\n    },\n    __self: this\n  }, \".pathcircle{fill:none;stroke:\" + (props.theme == 1 ? \"white\" : \"black\") + \";stroke-miterlimit:10;stroke-opacity:0.08;stroke-width:3px;}\")), __jsx(\"title\", {\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }, \"Datov\\xFD zdroj 22\"), __jsx(\"g\", {\n    id: \"Vrstva_2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, __jsx(\"g\", {\n    id: \"Vrstva_2-2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308\n    },\n    __self: this\n  }, __jsx(\"circle\", {\n    cx: \"80.73\",\n    cy: \"80.73\",\n    r: \"80.6\",\n    style: {\n      transform: handPathCircle.transform,\n      transformOrigin: \"center\"\n    },\n    strokeDasharray: handPathCircle.circleRadius,\n    strokeDashoffset: handPathCircle.maxRadius,\n    className: \"jsx-1771400329\" + \" \" + \"pathcircle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309\n    },\n    __self: this\n  })))), __jsx(\"div\", {\n    ref: lines,\n    id: \"lines\",\n    style: linesSize,\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    ref: hand,\n    id: \"hand\",\n    style: handSize,\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    ref: handle,\n    onMouseDown: onDrag,\n    id: \"handle\",\n    style: handleSize,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 26.04 26.04\",\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316\n    },\n    __self: this\n  }, __jsx(\"defs\", {\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317\n    },\n    __self: this\n  }, __jsx(\"style\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318\n    },\n    __self: this\n  }, \".handle{fill:\" + handleColor + \"}\")), __jsx(\"title\", {\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320\n    },\n    __self: this\n  }, \"Datov\\xFD zdroj 25\"), __jsx(\"g\", {\n    id: \"Vrstva_2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321\n    },\n    __self: this\n  }, __jsx(\"g\", {\n    id: \"Vrstva_2-2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322\n    },\n    __self: this\n  }, __jsx(\"circle\", {\n    cx: \"13.02\",\n    cy: \"13.02\",\n    r: \"13.02\",\n    className: \"jsx-1771400329\" + \" \" + \"handle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  }))))), __jsx(\"div\", {\n    className: \"jsx-1771400329\" + \" \" + \"valueGroup\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    ref: valueInput,\n    style: {\n      pointerEvents: \"all\"\n    },\n    onBlur: inputUpdated,\n    contentEditable: true,\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    className: \"jsx-1771400329\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  }, \"\\xB0C\")))), __jsx(\"style\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332\n    },\n    __self: this\n  }, \".smallValueLine,.bigValueLine{background:\" + (props.theme == 1 ? \"white\" : \"black\") + \"}\"), __jsx(_JSXStyle, {\n    id: \"1771400329\",\n    __self: this\n  }, \".workspace{background:none;margin:auto;position:relative;border-radius:100%;}.workspace .valueGroup{position:absolute;margin:0px;margin-top:50%;margin-left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:2rem;}#lines,#handPath,.lineContainer,.valueLineContainer,.valueGroup{pointer-events:none;overflow:visible;}#handPath{width:5rem;height:5rem;}#lines{position:absolute;height:0px;margin-top:50%;}.lineContainer,.valueLineContainer{height:0;position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-transform-origin:right center;-ms-transform-origin:right center;transform-origin:right center;}.line{height:5px;width:2rem;margin-left:0.5rem;-webkit-transform-origin:right center;-ms-transform-origin:right center;transform-origin:right center;}.smallValueLine{height:2px;width:0.5rem;margin-left:3.5rem;opacity:0.2;}.bigValueLine{height:2px;width:1rem;margin-left:3.5rem;opacity:0.2;}.valueLineGroup{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.value{margin-left:0.5rem;}#handPath{margin:50%;-webkit-transform:translate(-50%,-50%)rotate(180deg);-ms-transform:translate(-50%,-50%)rotate(180deg);transform:translate(-50%,-50%)rotate(180deg);position:absolute;}#hand{margin-top:50%;background:red;-webkit-transform-origin:right center;-ms-transform-origin:right center;transform-origin:right center;position:absolute;height:0;}#handle{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;width:2rem;height:2rem;-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);right:50%;position:absolute;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcSmFrdWIgU2VkbGFrXFxXZWJzdG9ybVByb2plY3RzXFxwcm9qZWt0X0NQIC0gdHlwZXNjcmlwdFxcY29tcG9uZW50c1xcVGVybW9zdGF0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0VStCLEFBRzZDLEFBUVIsQUFRRSxBQUlWLEFBSU8sQUFPVCxBQVFFLEFBTUMsQUFNQSxBQU1FLEFBS08sQUFLVCxBQUtHLEFBUUYsU0FoREssRUFYTixBQW1CRCxBQU1HLEFBTUYsQUFnQmtDLElBSy9CLENBdEVILEVBTUEsQUFnQkQsQ0FzQ1osQ0E5Q2tCLEVBd0JFLEFBWUMsQ0EvQnJCLENBeUJxQixHQWRQLENBN0JLLENBTUYsQUFpQkQsQ0ErQ2dCLE9BeERoQyxJQXdCZ0MsQUFZbkIsRUFOQSxDQXJDSyxBQWlCbEIsRUF2Qm9CLEdBNEVSLElBMUJaLEVBTkEsS0FyQ2tDLEFBc0VyQixLQTVFYixPQTZFK0IsRUF6QlYsMkJBeEJELCtCQXlDRCxXQWhDbkIsQUFnQnFCLE9Ba0JYLFFBUlUsQ0FTcEIsTUFqRWlCLFNBdUVMLEVBZFosSUF4REEsSUF1RW1CLFVBbERDLFFBbURwQixrQ0ExQkEsMkJBeEJnQyxzR0FDaEMiLCJmaWxlIjoiQzpcXFVzZXJzXFxKYWt1YiBTZWRsYWtcXFdlYnN0b3JtUHJvamVjdHNcXHByb2pla3RfQ1AgLSB0eXBlc2NyaXB0XFxjb21wb25lbnRzXFxUZXJtb3N0YXQudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7dXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLE1vdXNlRXZlbnQsU3ludGhldGljRXZlbnR9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgYW5pbWUgZnJvbSBcImFuaW1lanNcIjtcclxuaW1wb3J0IHtmaXJlYmFzZX0gZnJvbSBcIi4uL2ZpcmViYXNlXCI7XHJcbmltcG9ydCBJVGVybW9zdGF0IGZyb20gXCIuLi9pbnRlcmZhY2VzL0lUZXJtb3N0YXRcIjtcclxuaW1wb3J0IHtudW1iZXJ9IGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcbmltcG9ydCB7dXNlVGhlbWV9IGZyb20gXCJAbWF0ZXJpYWwtdWkvc3R5bGVzXCI7XHJcblxyXG5mdW5jdGlvbiBUZXJtb3N0YXQocHJvcHM6SVRlcm1vc3RhdCl7XHJcbiAgICBjb25zdCBtaW4gPSAwO1xyXG4gICAgY29uc3QgbWF4ID0gNTA7XHJcbiAgICBjb25zdCBjb21wb25lbnRXaWR0aCA9IDMzNztcclxuICAgIGNvbnN0IGNvbXBvbmVudEhlaWdodCA9IDMzNztcclxuICAgIGNvbnN0IG1pbkFuZ2xlID0gMDtcclxuICAgIGNvbnN0IG1heEFuZ2xlID0gMjcwO1xyXG4gICAgY29uc3QgYW5nbGVPdmVybGFwID0gKG1heEFuZ2xlLTE4MCkvMjtcclxuICAgIGNvbnN0IGxpbmVTZWdDb3VudCA9IDI1Ly8xMTtcclxuICAgIGNvbnN0IHZhbHVlTGluZVNlZ0NvdW50ID0gKDE2KjIpKzE7XHJcbiAgICBjb25zdCB2YWx1ZUxpbmVTZWdCaWdFYWNoID0gODtcclxuICAgIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGNvbnN0IGhhbmRsZUNvbG9yID0gdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW47XHJcblxyXG4gICAgY29uc3QgbGluZXMgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xyXG4gICAgY29uc3QgdmFsdWVJbnB1dCA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcclxuICAgIGNvbnN0IGhhbmQgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xyXG4gICAgY29uc3QgaGFuZGxlID0gdXNlUmVmPFNWR1NWR0VsZW1lbnQ+KG51bGwpO1xyXG5cclxuICAgIGNvbnN0IFtjb250YWluZXJzLHNldENvbnRhaW5lcnNdID0gdXNlU3RhdGU8SFRNTENvbGxlY3Rpb25PZjxFbGVtZW50Pj4oKTtcclxuXHJcbiAgICBjb25zdCBbbGFzdE5vZGUsc2V0TGFzdE5vZGVdID0gdXNlU3RhdGU8Q2hpbGROb2RlPigpO1xyXG4gICAgY29uc3QgW2xhc3ROb2RlQW5nbGUsc2V0TGFzdE5vZGVBbmdsZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xyXG4gICAgY29uc3QgW2FuZ2xlVHJhbnMsc2V0QW5nbGVUcmFuc10gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xyXG4gICAgY29uc3QgW2N1cnJlbnRBbmdsZSxzZXRDdXJyZW50QW5nbGVdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcclxuICAgIGNvbnN0IFtoYW5kQW5nbGUsc2V0SGFuZEFuZ2xlXSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XHJcbiAgICBjb25zdCBbY3VycmVudFZhbHVlLHNldEN1cnJlbnRWYWx1ZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xyXG4gICAgY29uc3QgW2RyYWcsc2V0RHJhZ10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XHJcbiAgICBjb25zdCBbaW5pdGlhbGl6ZSxzZXRJbml0aWFsaXplXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xyXG5cclxuICAgIGNvbnN0IHdvcmtzcGFjZVNpemUgPSB7XHJcbiAgICAgICAgaGVpZ2h0OmNvbXBvbmVudEhlaWdodCtcInB4XCIsXHJcbiAgICAgICAgd2lkdGg6Y29tcG9uZW50V2lkdGgrXCJweFwiXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGxpbmVzU2l6ZSA9IHtcclxuICAgICAgICB3aWR0aDpjb21wb25lbnRXaWR0aCtcInB4XCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbGluZUNvbnRhaW5lclNpemVzID0ge1xyXG4gICAgICAgIHdpZHRoOiBjb21wb25lbnRXaWR0aC8yK1wicHhcIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBoYW5kUGF0aFNpemUgPSB7XHJcbiAgICAgICAgd2lkdGg6IGNvbXBvbmVudFdpZHRoLzMrXCJweFwiLFxyXG4gICAgICAgIGhlaWdodDogY29tcG9uZW50SGVpZ2h0LzMrXCJweFwiXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhbmRTaXplID0ge1xyXG4gICAgICAgIHdpZHRoOiBjb21wb25lbnRXaWR0aC8yK1wicHhcIlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVTaXplID0ge1xyXG4gICAgICAgIHJpZ2h0OiAoY29tcG9uZW50V2lkdGgvMikvMytcInB4XCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgaGFuZFBhdGhDaXJjbGUgPSB7XHJcbiAgICAgICAgY2lyY2xlUmFkaXVzOjIqTWF0aC5QSSo4MC42LFxyXG4gICAgICAgIHRyYW5zZm9ybTpcInJvdGF0ZShcIistYW5nbGVPdmVybGFwK1wiZGVnKVwiLFxyXG4gICAgICAgIG1heFJhZGl1czooMipNYXRoLlBJKjgwLjYpLSgoKDIqTWF0aC5QSSo4MC42KS8zNjApKm1heEFuZ2xlKVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbnB1dFVwZGF0ZWQoZTphbnkpe1xyXG4gICAgICAgIGxldCB2YWwgPSBOdW1iZXIucGFyc2VJbnQoZS50YXJnZXQuaW5uZXJIVE1MKTtcclxuICAgICAgICBzZXRDdXJyZW50VmFsdWUodmFsKTtcclxuICAgICAgICBzZXRDdXJyZW50QW5nbGUoKCgobWF4QW5nbGUpL21heCkqdmFsKS0oYW5nbGVPdmVybGFwKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25Nb3ZlKGU6TW91c2VFdmVudCl7XHJcbiAgICAgICAgaWYoZHJhZyl7XHJcbiAgICAgICAgICAgIGxldCBhbmdsZSA9IE1hdGguYXRhbjIoZS5uYXRpdmVFdmVudC5vZmZzZXRZLShjb21wb25lbnRIZWlnaHQvMiksIGUubmF0aXZlRXZlbnQub2Zmc2V0WC0oY29tcG9uZW50V2lkdGgvMikpO1xyXG4gICAgICAgICAgICBsZXQgYW5nbGUyID0gYW5nbGUgKiAoMTgwL01hdGguUEkpO1xyXG4gICAgICAgICAgICAvL3RvIDM2MCByYW5nZVxyXG4gICAgICAgICAgICBpZihhbmdsZTIgPCAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhbmdsZTIgPSAzNjAtKC1hbmdsZTIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vc2V0IDAgYW5nbGVcclxuICAgICAgICAgICAgYW5nbGUyKz0gMTgwO1xyXG4gICAgICAgICAgICAvL2NvcmVjdCBhbmdsZVxyXG4gICAgICAgICAgICBpZihhbmdsZTIgPiAzNjApXHJcbiAgICAgICAgICAgICAgICBhbmdsZTItPTM2MFxyXG5cclxuICAgICAgICAgICAgYW5nbGUyPShtYXhBbmdsZS1hbmdsZTIpO1xyXG4gICAgICAgICAgICBpZihhbmdsZTIgPCAwKVxyXG4gICAgICAgICAgICAgICAgYW5nbGUyID0gKGFuZ2xlT3ZlcmxhcC0oKDM2MC1tYXhBbmdsZSkgKyBhbmdsZTIpKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgYW5nbGUyPS0oYW5nbGUyLW1heEFuZ2xlLWFuZ2xlT3ZlcmxhcCk7XHJcblxyXG4gICAgICAgICAgICBpZihhbmdsZTIgPj0gKG1pbkFuZ2xlKSAmJiBhbmdsZTIgPD0gKG1heEFuZ2xlKSkge1xyXG4gICAgICAgICAgICAgICAgc2V0Q3VycmVudFZhbHVlKE1hdGgucm91bmQoKChtYXggLyBtYXhBbmdsZSkgKiBhbmdsZTIpKSk7XHJcbiAgICAgICAgICAgICAgICBzZXRBbmdsZVRyYW5zKGFuZ2xlMi1hbmdsZU92ZXJsYXApO1xyXG4gICAgICAgICAgICAgICAgc2V0SGFuZEFuZ2xlKGFuZ2xlMi1hbmdsZU92ZXJsYXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uRHJhZyhlOk1vdXNlRXZlbnQpe1xyXG4gICAgICAgIGlmKCFkcmFnKSB7XHJcbiAgICAgICAgICAgIHNldERyYWcodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmKGhhbmRsZS5jdXJyZW50KVxyXG4gICAgICAgICAgICBoYW5kbGUuY3VycmVudC5zdHlsZS5wb2ludGVyRXZlbnRzPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25EcmFnRW5kKGU6TW91c2VFdmVudCl7XHJcbiAgICAgICAgaWYoZHJhZyl7XHJcbiAgICAgICAgICAgIHNldERyYWcoZmFsc2UpO1xyXG4gICAgICAgICAgICBpZihoYW5kbGUuY3VycmVudClcclxuICAgICAgICAgICAgaGFuZGxlLmN1cnJlbnQuc3R5bGUucG9pbnRlckV2ZW50cz1cImFsbFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1c2VFZmZlY3QoKCk9PntcclxuICAgICAgICBpZihjb250YWluZXJzKSB7XHJcbiAgICAgICAgICAgIGxldCBhbmdsZSA9IE1hdGgucm91bmQoaGFuZEFuZ2xlKTtcclxuICAgICAgICAgICAgaWYgKGFuZ2xlIDw9IChtYXhBbmdsZSkgJiYgYW5nbGUgPj0gKG1pbkFuZ2xlLWFuZ2xlT3ZlcmxhcCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGFpbmVycy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGFpbmVyQW5nbGUgPSBwYXJzZUludChjb250YWluZXJzW2ldLmdldEF0dHJpYnV0ZSgncm90YXRlJykgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbnRhaW5lckFuZ2xlID4gbGFzdE5vZGVBbmdsZSAmJiBjb250YWluZXJBbmdsZSA8PSBhbmdsZSkgfHwgKGNvbnRhaW5lckFuZ2xlIDwgbGFzdE5vZGVBbmdsZSAmJiBhbmdsZSA8PSBjb250YWluZXJBbmdsZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogbGFzdE5vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogMSwgZWFzaW5nOiAnZWFzZUluT3V0UXVhZCcsIGR1cmF0aW9uOiA1MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRzOiBjb250YWluZXJzW2ldLmNoaWxkTm9kZXNbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogMS41LCBlYXNpbmc6ICdlYXNlT3V0U2luZScsIGR1cmF0aW9uOiA1MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0Tm9kZShjb250YWluZXJzW2ldLmNoaWxkTm9kZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0Tm9kZUFuZ2xlKGNvbnRhaW5lckFuZ2xlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgIGlmKGhhbmQuY3VycmVudClcclxuICAgICAgICAgICAgICAgIGhhbmQuY3VycmVudC5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZShcIiArIGFuZ2xlICsgXCJkZWcpXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFtoYW5kQW5nbGVdKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCk9PntcclxuICAgICAgICBsZXQgYW5pbSA9IHtcclxuICAgICAgICAgICAgdmFsdWU6YW5nbGVUcmFuc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgdGFyZ2V0czphbmltLFxyXG4gICAgICAgICAgICB2YWx1ZTooY3VycmVudEFuZ2xlKSxcclxuICAgICAgICAgICAgZWFzaW5nOlwibGluZWFyXCIsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOjUwMCxcclxuICAgICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAvL3VwZGF0ZUhhbmRBbmdsZShhbmltLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHNldEhhbmRBbmdsZShhbmltLnZhbHVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tcGxldGU6KCk9PntcclxuICAgICAgICAgICAgICAgIHNldEFuZ2xlVHJhbnMoY3VycmVudEFuZ2xlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxbY3VycmVudEFuZ2xlXSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpPT57XHJcbiAgICAgICAgaWYodmFsdWVJbnB1dC5jdXJyZW50KVxyXG4gICAgICAgIHZhbHVlSW5wdXQuY3VycmVudC5pbm5lckhUTUwgPSBjdXJyZW50VmFsdWUudG9TdHJpbmcoKTtcclxuICAgICAgICBpZighaW5pdGlhbGl6ZSlcclxuICAgICAgICBwcm9wcy5vblZhbHVlQ2hhbmdlZChOdW1iZXIucGFyc2VJbnQoY3VycmVudFZhbHVlLnRvU3RyaW5nKCkpKTtcclxuICAgIH0sW2N1cnJlbnRWYWx1ZV0pO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKT0+e1xyXG4gICAgICAgIGxldCBpbml0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgaWYoaW5pdFZhbHVlIT11bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlTGluZVNlZ0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBoYW5kQW5nbGUgPSBNYXRoLnJvdW5kKChtYXhBbmdsZSAvIG1heCkgKiBrKS1hbmdsZU92ZXJsYXA7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZSA9ICc8ZGl2IHN0eWxlPVwidHJhbnNmb3JtOnJvdGF0ZSgnICsgaGFuZEFuZ2xlICsgJ2RlZykhaW1wb3J0YW50O3dpZHRoOicrKGxpbmVDb250YWluZXJTaXplcy53aWR0aCkrJztcIiBjbGFzcz1cInZhbHVlTGluZUNvbnRhaW5lclwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidmFsdWVMaW5lR3JvdXBcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0nKygoaSV2YWx1ZUxpbmVTZWdCaWdFYWNoPT0wKT9cImJpZ1ZhbHVlTGluZVwiOlwic21hbGxWYWx1ZUxpbmVcIikrJz48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInZhbHVlXCIgc3R5bGU9XCJ0cmFuc2Zvcm06cm90YXRlKCcgKyAtaGFuZEFuZ2xlICsgJ2RlZylcIj4nKygoaSV2YWx1ZUxpbmVTZWdCaWdFYWNoPT0wKT9NYXRoLnJvdW5kKGspOlwiXCIpKyc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JytcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGlmIChsaW5lcy5jdXJyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzLmN1cnJlbnQuaW5uZXJIVE1MICs9IGxpbmU7XHJcbiAgICAgICAgICAgICAgICBrICs9IG1heCAvICh2YWx1ZUxpbmVTZWdDb3VudCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgaiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZVNlZ0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBoYW5kQW5nbGUgPSBNYXRoLnJvdW5kKChtYXhBbmdsZSAvIG1heCkgKiBqKS1hbmdsZU92ZXJsYXA7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZSA9ICc8ZGl2IHJvdGF0ZT0nICsgaGFuZEFuZ2xlICsgJyBzdHlsZT1cInRyYW5zZm9ybTpyb3RhdGUoJyArIGhhbmRBbmdsZSArICdkZWcpIWltcG9ydGFudDt3aWR0aDonKyhsaW5lQ29udGFpbmVyU2l6ZXMud2lkdGgpKyc7XCIgY2xhc3M9XCJsaW5lQ29udGFpbmVyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJsaW5lXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBpZiAobGluZXMuY3VycmVudClcclxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5jdXJyZW50LmlubmVySFRNTCArPSBsaW5lO1xyXG4gICAgICAgICAgICAgICAgaiArPSBtYXggLyAobGluZVNlZ0NvdW50IC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBjb250RGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2xpbmVDb250YWluZXInKTtcclxuICAgICAgICAgICAgbGV0IGluaXRsYXN0Tm9kZSA9IGNvbnREYXRhWzBdLmNoaWxkTm9kZXNbMF07XHJcbiAgICAgICAgICAgIGxldCBpbml0TGFzdE5vZGVBbmdsZSA9IDA7XHJcbiAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldHM6IGNvbnREYXRhWzBdLmNoaWxkTm9kZXNbMF0sXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogW1xyXG4gICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogMS41LCBlYXNpbmc6ICdlYXNlT3V0U2luZScsIGR1cmF0aW9uOiA1MDB9XHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGxpbmVTZWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxpbmVcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0ID0gWzczLCA4MCwgMjQ1XTtcclxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gWzI0NCwgNjcsIDU0XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZVNlZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwZXJjZW50ID0gKChpKSAvIChsaW5lU2Vncy5sZW5ndGggLSAxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlZCA9IGZpcnN0WzBdICsgcGVyY2VudCAqIChzZWNvbmRbMF0gLSBmaXJzdFswXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JlZW4gPSBmaXJzdFsxXSArIHBlcmNlbnQgKiAoc2Vjb25kWzFdIC0gZmlyc3RbMV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsdWUgPSBmaXJzdFsyXSArIHBlcmNlbnQgKiAoc2Vjb25kWzJdIC0gZmlyc3RbMl0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxpbmVTZWdzW2ldLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZDpcIiArIFwicmdiKFwiICsgcmVkICsgXCIsXCIgKyBncmVlbiArIFwiLFwiICsgYmx1ZSArIFwiKTtcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgO1xyXG5cclxuICAgICAgICAgICAgc2V0Q29udGFpbmVycyhjb250RGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUhhbmRBbmdsZSA9IChhbmdsZTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhbmdsZSA9IE1hdGgucm91bmQoYW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhbmdsZSA8PSBtYXhBbmdsZSAmJiBhbmdsZSA+PSBtaW5BbmdsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udERhdGEubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250YWluZXJBbmdsZSA9IHBhcnNlSW50KGNvbnREYXRhW2ldLmdldEF0dHJpYnV0ZSgncm90YXRlJykgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjb250YWluZXJBbmdsZSA+IGluaXRMYXN0Tm9kZUFuZ2xlICYmIGNvbnRhaW5lckFuZ2xlIDw9IGFuZ2xlKSB8fCAoY29udGFpbmVyQW5nbGUgPCBpbml0TGFzdE5vZGVBbmdsZSAmJiBhbmdsZSA8PSBjb250YWluZXJBbmdsZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRzOiBpbml0bGFzdE5vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAxLCBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJywgZHVyYXRpb246IDUwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogY29udERhdGFbaV0uY2hpbGROb2Rlc1swXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6IDEuNSwgZWFzaW5nOiAnZWFzZU91dFNpbmUnLCBkdXJhdGlvbjogNTAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRsYXN0Tm9kZSA9IGNvbnREYXRhW2ldLmNoaWxkTm9kZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0TGFzdE5vZGVBbmdsZSA9IGNvbnRhaW5lckFuZ2xlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGFuZFwiKS5zdHlsZS50cmFuc2Zvcm09XCJyb3RhdGUoXCIrKGFuZ2xlKStcImRlZylcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpbml0QW5nbGVUcmFucyA9IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAwXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldHM6IGluaXRBbmdsZVRyYW5zLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6ICgobWF4QW5nbGUgLyBtYXgpICogaW5pdFZhbHVlKSxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogXCJsaW5lYXJcIixcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVIYW5kQW5nbGUoaW5pdEFuZ2xlVHJhbnMudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TGFzdE5vZGUoaW5pdGxhc3ROb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRMYXN0Tm9kZUFuZ2xlKGluaXRMYXN0Tm9kZUFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaW5pdFZhbHVlIT11bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZhbHVlKGluaXRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRBbmdsZSgoKG1heEFuZ2xlIC8gbWF4KSAqIGluaXRWYWx1ZSktYW5nbGVPdmVybGFwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldEluaXRpYWxpemUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFtwcm9wcy5kZWZhdWx0VmFsdWVdKTtcclxuXHJcbiAgICByZXR1cm4oXHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPGRpdiBpZD1cIndvcmtcIiBvbk1vdXNlTW92ZT17b25Nb3ZlfSBvbk1vdXNlVXA9e29uRHJhZ0VuZH0gc3R5bGU9e3dvcmtzcGFjZVNpemV9IGNsYXNzTmFtZT1cIndvcmtzcGFjZVwiPlxyXG4gICAgICAgICAgICAgICAgPHN2ZyBpZD1cImhhbmRQYXRoXCIgc3R5bGU9e2hhbmRQYXRoU2l6ZX0geG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTYxLjQ1IDE2MS40NVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGU+e1wiLnBhdGhjaXJjbGV7ZmlsbDpub25lO3N0cm9rZTpcIisocHJvcHMudGhlbWU9PTE/XCJ3aGl0ZVwiOlwiYmxhY2tcIikrXCI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLW9wYWNpdHk6MC4wODtzdHJva2Utd2lkdGg6M3B4O31cIn08L3N0eWxlPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGVmcz5cclxuICAgICAgICAgICAgICAgICAgICA8dGl0bGU+RGF0b3bDvSB6ZHJvaiAyMjwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9XCJWcnN0dmFfMlwiIGRhdGEtbmFtZT1cIlZyc3R2YSAyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPVwiVnJzdHZhXzItMlwiIGRhdGEtbmFtZT1cIlZyc3R2YSAyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cInBhdGhjaXJjbGVcIiBjeD1cIjgwLjczXCIgY3k9XCI4MC43M1wiIHI9XCI4MC42XCIgc3R5bGU9e3t0cmFuc2Zvcm06aGFuZFBhdGhDaXJjbGUudHJhbnNmb3JtLHRyYW5zZm9ybU9yaWdpbjpcImNlbnRlclwifX0gc3Ryb2tlRGFzaGFycmF5PXtoYW5kUGF0aENpcmNsZS5jaXJjbGVSYWRpdXN9IHN0cm9rZURhc2hvZmZzZXQ9e2hhbmRQYXRoQ2lyY2xlLm1heFJhZGl1c30vPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17bGluZXN9IGlkPVwibGluZXNcIiBzdHlsZT17bGluZXNTaXplfT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiByZWY9e2hhbmR9IGlkPVwiaGFuZFwiIHN0eWxlPXtoYW5kU2l6ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyByZWY9e2hhbmRsZX0gb25Nb3VzZURvd249e29uRHJhZ30gaWQ9XCJoYW5kbGVcIiBzdHlsZT17aGFuZGxlU2l6ZX0geG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjYuMDQgMjYuMDRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRlZnM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGU+e1wiLmhhbmRsZXtmaWxsOlwiK2hhbmRsZUNvbG9yK1wifVwifTwvc3R5bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGVmcz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPkRhdG92w70gemRyb2ogMjU8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD1cIlZyc3R2YV8yXCIgZGF0YS1uYW1lPVwiVnJzdHZhIDJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPVwiVnJzdHZhXzItMlwiIGRhdGEtbmFtZT1cIlZyc3R2YSAyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJoYW5kbGVcIiBjeD1cIjEzLjAyXCIgY3k9XCIxMy4wMlwiIHI9XCIxMy4wMlwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17XCJ2YWx1ZUdyb3VwXCJ9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPjxzcGFuIHJlZj17dmFsdWVJbnB1dH0gc3R5bGU9e3twb2ludGVyRXZlbnRzOlwiYWxsXCJ9fSBvbkJsdXI9e2lucHV0VXBkYXRlZH0gY29udGVudEVkaXRhYmxlLz48c3Bhbj7CsEM8L3NwYW4+PC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8c3R5bGU+e1wiLnNtYWxsVmFsdWVMaW5lLC5iaWdWYWx1ZUxpbmV7YmFja2dyb3VuZDpcIisocHJvcHMudGhlbWU9PTE/XCJ3aGl0ZVwiOlwiYmxhY2tcIikrXCJ9XCJ9PC9zdHlsZT5cclxuICAgICAgICAgICAgPHN0eWxlIGpzeCBnbG9iYWw+e2BcclxuICAgICAgICAgICAgICAgIC53b3Jrc3BhY2V7XHJcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6LyojMjEyMTIxKi9ub25lO1xyXG4gICAgICAgICAgICAgICAgICAvL2hlaWdodDo1MDBweDtcclxuICAgICAgICAgICAgICAgICAgLy93aWR0aDo1MDBweDtcclxuICAgICAgICAgICAgICAgICAgbWFyZ2luOmF1dG87XHJcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOjEwMCU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAud29ya3NwYWNlIC52YWx1ZUdyb3Vwe1xyXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMHB4O1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDJyZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAjbGluZXMsI2hhbmRQYXRoLC5saW5lQ29udGFpbmVyLC52YWx1ZUxpbmVDb250YWluZXIsLnZhbHVlR3JvdXB7XHJcbiAgICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gICAgICAgICAgICAgICAgICBvdmVyZmxvdzp2aXNpYmxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgI2hhbmRQYXRoe1xyXG4gICAgICAgICAgICAgICAgICB3aWR0aDo1cmVtO1xyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6NXJlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICNsaW5lc3tcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDowcHg7XHJcbiAgICAgICAgICAgICAgICAgIC8vd2lkdGg6NTAwcHg7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6NTAlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmxpbmVDb250YWluZXIsLnZhbHVlTGluZUNvbnRhaW5lcntcclxuICAgICAgICAgICAgICAgICAgLy93aWR0aDogMjUwcHg7XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDowO1xyXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgZGlzcGxheTpmbGV4O1xyXG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczpjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOnJvdztcclxuICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmxpbmV7XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDo1cHg7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOjJyZW07XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OjAuNXJlbTtcclxuICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLnNtYWxsVmFsdWVMaW5le1xyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6IDJweDtcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6IDAuNXJlbTtcclxuICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDMuNXJlbTtcclxuICAgICAgICAgICAgICAgICAgb3BhY2l0eTowLjI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAuYmlnVmFsdWVMaW5le1xyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6IDJweDtcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6IDFyZW07XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAzLjVyZW07XHJcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC4yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLnZhbHVlTGluZUdyb3Vwe1xyXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLnZhbHVle1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OjAuNXJlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICNoYW5kUGF0aHtcclxuICAgICAgICAgICAgICAgICAgLy93aWR0aDogMjUwcHg7XHJcbiAgICAgICAgICAgICAgICAgIC8vaGVpZ2h0OiAyNTBweDtcclxuICAgICAgICAgICAgICAgICAgbWFyZ2luOiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSlyb3RhdGUoMTgwZGVnKTtcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgI2hhbmR7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6NTAlO1xyXG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnJlZDtcclxuICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgLy93aWR0aDoyNTBweDtcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAjaGFuZGxle1xyXG4gICAgICAgICAgICAgICAgICBjdXJzb3I6IGdyYWI7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOjJyZW07XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDoycmVtO1xyXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKDUwJSwtNTAlKTtcclxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IDUwJTtcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVybW9zdGF0OyJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Jakub Sedlak\\\\\\\\WebstormProjects\\\\\\\\projekt_CP - typescript\\\\\\\\components\\\\\\\\Termostat.tsx */\"));\n}\n\nexport default Termostat;","map":{"version":3,"sources":["C:/Users/Jakub Sedlak/WebstormProjects/projekt_CP - typescript/components/Termostat.tsx"],"names":["React","useEffect","useRef","useState","anime","useTheme","Termostat","props","min","max","componentWidth","componentHeight","minAngle","maxAngle","angleOverlap","lineSegCount","valueLineSegCount","valueLineSegBigEach","theme","handleColor","palette","primary","main","lines","valueInput","hand","handle","containers","setContainers","lastNode","setLastNode","lastNodeAngle","setLastNodeAngle","angleTrans","setAngleTrans","currentAngle","setCurrentAngle","handAngle","setHandAngle","currentValue","setCurrentValue","drag","setDrag","initialize","setInitialize","workspaceSize","height","width","linesSize","lineContainerSizes","handPathSize","handSize","handleSize","right","handPathCircle","circleRadius","Math","PI","transform","maxRadius","inputUpdated","e","val","target","innerHTML","onMove","angle","atan2","nativeEvent","offsetY","offsetX","angle2","round","onDrag","current","style","pointerEvents","onDragEnd","i","length","containerAngle","getAttribute","targets","scale","value","easing","duration","delay","childNodes","anim","update","complete","toString","onValueChanged","initValue","defaultValue","undefined","k","line","j","contData","document","getElementsByClassName","initlastNode","initLastNodeAngle","lineSegs","first","second","percent","red","green","blue","setAttribute","updateHandAngle","initAngleTrans","transformOrigin"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,MAA1B,EAAkCC,QAAlC,QAA2E,OAA3E;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAIA,SAAQC,QAAR,QAAuB,qBAAvB;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAAoC;AAChC,MAAMC,GAAG,GAAG,CAAZ;AACA,MAAMC,GAAG,GAAG,EAAZ;AACA,MAAMC,cAAc,GAAG,GAAvB;AACA,MAAMC,eAAe,GAAG,GAAxB;AACA,MAAMC,QAAQ,GAAG,CAAjB;AACA,MAAMC,QAAQ,GAAG,GAAjB;AACA,MAAMC,YAAY,GAAG,CAACD,QAAQ,GAAC,GAAV,IAAe,CAApC;AACA,MAAME,YAAY,GAAG,EAArB,CARgC,CAQT;;AACvB,MAAMC,iBAAiB,GAAI,KAAG,CAAJ,GAAO,CAAjC;AACA,MAAMC,mBAAmB,GAAG,CAA5B;AACA,MAAMC,KAAK,GAAGb,QAAQ,EAAtB,CAXgC,CAYhC;;AACA,MAAMc,WAAW,GAAGD,KAAK,CAACE,OAAN,CAAcC,OAAd,CAAsBC,IAA1C;AAEA,MAAMC,KAAK,GAAGrB,MAAM,CAAiB,IAAjB,CAApB;AACA,MAAMsB,UAAU,GAAGtB,MAAM,CAAmB,IAAnB,CAAzB;AACA,MAAMuB,IAAI,GAAGvB,MAAM,CAAiB,IAAjB,CAAnB;AACA,MAAMwB,MAAM,GAAGxB,MAAM,CAAgB,IAAhB,CAArB;;AAlBgC,kBAoBGC,QAAQ,EApBX;AAAA,MAoBzBwB,UApByB;AAAA,MAoBdC,aApBc;;AAAA,mBAsBDzB,QAAQ,EAtBP;AAAA,MAsBzB0B,QAtByB;AAAA,MAsBhBC,WAtBgB;;AAAA,mBAuBS3B,QAAQ,CAAS,CAAT,CAvBjB;AAAA,MAuBzB4B,aAvByB;AAAA,MAuBXC,gBAvBW;;AAAA,mBAwBG7B,QAAQ,CAAS,CAAT,CAxBX;AAAA,MAwBzB8B,UAxByB;AAAA,MAwBdC,aAxBc;;AAAA,mBAyBO/B,QAAQ,CAAS,CAAT,CAzBf;AAAA,MAyBzBgC,YAzByB;AAAA,MAyBZC,eAzBY;;AAAA,mBA0BCjC,QAAQ,CAAS,CAAT,CA1BT;AAAA,MA0BzBkC,SA1ByB;AAAA,MA0BfC,YA1Be;;AAAA,mBA2BOnC,QAAQ,CAAS,CAAT,CA3Bf;AAAA,MA2BzBoC,YA3ByB;AAAA,MA2BZC,eA3BY;;AAAA,mBA4BTrC,QAAQ,CAAU,KAAV,CA5BC;AAAA,MA4BzBsC,IA5ByB;AAAA,MA4BpBC,OA5BoB;;AAAA,mBA6BGvC,QAAQ,CAAU,IAAV,CA7BX;AAAA,MA6BzBwC,UA7ByB;AAAA,MA6BdC,aA7Bc;;AA+BhC,MAAMC,aAAa,GAAG;AAClBC,IAAAA,MAAM,EAACnC,eAAe,GAAC,IADL;AAElBoC,IAAAA,KAAK,EAACrC,cAAc,GAAC;AAFH,GAAtB;AAKA,MAAMsC,SAAS,GAAG;AACdD,IAAAA,KAAK,EAACrC,cAAc,GAAC;AADP,GAAlB;AAIA,MAAMuC,kBAAkB,GAAG;AACvBF,IAAAA,KAAK,EAAErC,cAAc,GAAC,CAAf,GAAiB;AADD,GAA3B;AAIA,MAAMwC,YAAY,GAAG;AACjBH,IAAAA,KAAK,EAAErC,cAAc,GAAC,CAAf,GAAiB,IADP;AAEjBoC,IAAAA,MAAM,EAAEnC,eAAe,GAAC,CAAhB,GAAkB;AAFT,GAArB;AAKA,MAAMwC,QAAQ,GAAG;AACbJ,IAAAA,KAAK,EAAErC,cAAc,GAAC,CAAf,GAAiB;AADX,GAAjB;AAIA,MAAM0C,UAAU,GAAG;AACfC,IAAAA,KAAK,EAAG3C,cAAc,GAAC,CAAhB,GAAmB,CAAnB,GAAqB;AADb,GAAnB;AAIA,MAAM4C,cAAc,GAAG;AACnBC,IAAAA,YAAY,EAAC,IAAEC,IAAI,CAACC,EAAP,GAAU,IADJ;AAEnBC,IAAAA,SAAS,EAAC,YAAU,CAAC5C,YAAX,GAAwB,MAFf;AAGnB6C,IAAAA,SAAS,EAAE,IAAEH,IAAI,CAACC,EAAP,GAAU,IAAX,GAAoB,IAAED,IAAI,CAACC,EAAP,GAAU,IAAX,GAAiB,GAAlB,GAAuB5C;AAHhC,GAAvB;;AAMA,WAAS+C,YAAT,CAAsBC,CAAtB,EAA4B;AACxB,QAAIC,GAAG,GAAG,iBAAgBD,CAAC,CAACE,MAAF,CAASC,SAAzB,CAAV;;AACAxB,IAAAA,eAAe,CAACsB,GAAD,CAAf;AACA1B,IAAAA,eAAe,CAAIvB,QAAD,GAAWJ,GAAZ,GAAiBqD,GAAlB,GAAwBhD,YAAzB,CAAf;AACH;;AAED,WAASmD,MAAT,CAAgBJ,CAAhB,EAA6B;AACzB,QAAGpB,IAAH,EAAQ;AACJ,UAAIyB,KAAK,GAAGV,IAAI,CAACW,KAAL,CAAWN,CAAC,CAACO,WAAF,CAAcC,OAAd,GAAuB1D,eAAe,GAAC,CAAlD,EAAsDkD,CAAC,CAACO,WAAF,CAAcE,OAAd,GAAuB5D,cAAc,GAAC,CAA5F,CAAZ;AACA,UAAI6D,MAAM,GAAGL,KAAK,IAAI,MAAIV,IAAI,CAACC,EAAb,CAAlB,CAFI,CAGJ;;AACA,UAAGc,MAAM,GAAG,CAAZ,EACA;AACIA,QAAAA,MAAM,GAAG,MAAK,CAACA,MAAf;AACH,OAPG,CAQJ;;;AACAA,MAAAA,MAAM,IAAG,GAAT,CATI,CAUJ;;AACA,UAAGA,MAAM,GAAG,GAAZ,EACIA,MAAM,IAAE,GAAR;AAEJA,MAAAA,MAAM,GAAE1D,QAAQ,GAAC0D,MAAjB;AACA,UAAGA,MAAM,GAAG,CAAZ,EACIA,MAAM,GAAIzD,YAAY,IAAG,MAAID,QAAL,GAAiB0D,MAAnB,CAAtB,CADJ,KAGIA,MAAM,GAAC,EAAEA,MAAM,GAAC1D,QAAP,GAAgBC,YAAlB,CAAP;;AAEJ,UAAGyD,MAAM,IAAK3D,QAAX,IAAwB2D,MAAM,IAAK1D,QAAtC,EAAiD;AAC7C2B,QAAAA,eAAe,CAACgB,IAAI,CAACgB,KAAL,CAAa/D,GAAG,GAAGI,QAAP,GAAmB0D,MAA/B,CAAD,CAAf;AACArC,QAAAA,aAAa,CAACqC,MAAM,GAACzD,YAAR,CAAb;AACAwB,QAAAA,YAAY,CAACiC,MAAM,GAACzD,YAAR,CAAZ;AACH;AACJ;AACJ;;AAED,WAAS2D,MAAT,CAAgBZ,CAAhB,EAA6B;AACzB,QAAG,CAACpB,IAAJ,EAAU;AACNC,MAAAA,OAAO,CAAC,IAAD,CAAP;AACA,UAAGhB,MAAM,CAACgD,OAAV,EACAhD,MAAM,CAACgD,OAAP,CAAeC,KAAf,CAAqBC,aAArB,GAAoC,MAApC;AACH;AACJ;;AAED,WAASC,SAAT,CAAmBhB,CAAnB,EAAgC;AAC5B,QAAGpB,IAAH,EAAQ;AACJC,MAAAA,OAAO,CAAC,KAAD,CAAP;AACA,UAAGhB,MAAM,CAACgD,OAAV,EACAhD,MAAM,CAACgD,OAAP,CAAeC,KAAf,CAAqBC,aAArB,GAAmC,KAAnC;AACH;AACJ;;AAED3E,EAAAA,SAAS,CAAC,YAAI;AACV,QAAG0B,UAAH,EAAe;AACX,UAAIuC,KAAK,GAAGV,IAAI,CAACgB,KAAL,CAAWnC,SAAX,CAAZ;;AACA,UAAI6B,KAAK,IAAKrD,QAAV,IAAuBqD,KAAK,IAAKtD,QAAQ,GAACE,YAA9C,EAA6D;AACzD,aAAK,IAAIgE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnD,UAAU,CAACoD,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAExC,cAAIE,cAAc,GAAG,UAASrD,UAAU,CAACmD,CAAD,CAAV,CAAcG,YAAd,CAA2B,QAA3B,CAAT,CAArB;;AACA,cAAKD,cAAc,GAAGjD,aAAjB,IAAkCiD,cAAc,IAAId,KAArD,IAAgEc,cAAc,GAAGjD,aAAjB,IAAkCmC,KAAK,IAAIc,cAA/G,EAAgI;AAC5H5E,YAAAA,KAAK,CAAC;AACF8E,cAAAA,OAAO,EAAErD,QADP;AAEFsD,cAAAA,KAAK,EAAE,CACH;AAACC,gBAAAA,KAAK,EAAE,CAAR;AAAWC,gBAAAA,MAAM,EAAE,eAAnB;AAAoCC,gBAAAA,QAAQ,EAAE;AAA9C,eADG,CAFL;AAKFC,cAAAA,KAAK,EAAE;AALL,aAAD,CAAL;AAOAnF,YAAAA,KAAK,CAAC;AACF8E,cAAAA,OAAO,EAAEvD,UAAU,CAACmD,CAAD,CAAV,CAAcU,UAAd,CAAyB,CAAzB,CADP;AAEFL,cAAAA,KAAK,EAAE,CACH;AAACC,gBAAAA,KAAK,EAAE,GAAR;AAAaC,gBAAAA,MAAM,EAAE,aAArB;AAAoCC,gBAAAA,QAAQ,EAAE;AAA9C,eADG,CAFL;AAKFC,cAAAA,KAAK,EAAE;AALL,aAAD,CAAL;AAOAzD,YAAAA,WAAW,CAACH,UAAU,CAACmD,CAAD,CAAV,CAAcU,UAAd,CAAyB,CAAzB,CAAD,CAAX;AACAxD,YAAAA,gBAAgB,CAACgD,cAAD,CAAhB;AACA;AACH;AAEJ;;AACD;AACA,YAAGvD,IAAI,CAACiD,OAAR,EACAjD,IAAI,CAACiD,OAAL,CAAaC,KAAb,CAAmBjB,SAAnB,GAA+B,YAAYQ,KAAZ,GAAoB,MAAnD;AACH;AACJ;AACJ,GAjCQ,EAiCP,CAAC7B,SAAD,CAjCO,CAAT;AAmCApC,EAAAA,SAAS,CAAC,YAAI;AACV,QAAIwF,IAAI,GAAG;AACPL,MAAAA,KAAK,EAACnD;AADC,KAAX;AAIA7B,IAAAA,KAAK,CAAC;AACF8E,MAAAA,OAAO,EAACO,IADN;AAEFL,MAAAA,KAAK,EAAEjD,YAFL;AAGFkD,MAAAA,MAAM,EAAC,QAHL;AAIFC,MAAAA,QAAQ,EAAC,GAJP;AAKFI,MAAAA,MAAM,EAAC,kBAAU;AACb;AACApD,QAAAA,YAAY,CAACmD,IAAI,CAACL,KAAN,CAAZ;AACH,OARC;AASFO,MAAAA,QAAQ,EAAC,oBAAI;AACTzD,QAAAA,aAAa,CAACC,YAAD,CAAb;AACH;AAXC,KAAD,CAAL;AAaH,GAlBQ,EAkBP,CAACA,YAAD,CAlBO,CAAT;AAoBAlC,EAAAA,SAAS,CAAC,YAAI;AACV,QAAGuB,UAAU,CAACkD,OAAd,EACAlD,UAAU,CAACkD,OAAX,CAAmBV,SAAnB,GAA+BzB,YAAY,CAACqD,QAAb,EAA/B;AACA,QAAG,CAACjD,UAAJ,EACApC,KAAK,CAACsF,cAAN,CAAqB,iBAAgBtD,YAAY,CAACqD,QAAb,EAAhB,CAArB;AACH,GALQ,EAKP,CAACrD,YAAD,CALO,CAAT;AAOAtC,EAAAA,SAAS,CAAC,YAAI;AACV,QAAI6F,SAAS,GAAGvF,KAAK,CAACwF,YAAtB;;AACA,QAAGD,SAAS,IAAEE,SAAd,EAAyB;AACrB,UAAIC,CAAC,GAAG,CAAR;;AACA,WAAK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9D,iBAApB,EAAuC8D,CAAC,EAAxC,EAA4C;AACxC,YAAIzC,UAAS,GAAGmB,IAAI,CAACgB,KAAL,CAAY3D,QAAQ,GAAGJ,GAAZ,GAAmBwF,CAA9B,IAAiCnF,YAAjD;;AACA,YAAIoF,IAAI,GAAG,kCAAkC7D,UAAlC,GAA8C,uBAA9C,GAAuEY,kBAAkB,CAACF,KAA1F,GAAiG,gCAAjG,GACP,8BADO,GAEP,aAFO,IAES+B,CAAC,GAAC7D,mBAAF,IAAuB,CAAxB,GAA2B,cAA3B,GAA0C,gBAFlD,IAEoE,SAFpE,GAGP,6CAHO,GAGyC,CAACoB,UAH1C,GAGsD,QAHtD,IAGiEyC,CAAC,GAAC7D,mBAAF,IAAuB,CAAxB,GAA2BuC,IAAI,CAACgB,KAAL,CAAWyB,CAAX,CAA3B,GAAyC,EAHzG,IAG6G,QAH7G,GAIP,QAJO,GAKP,QALJ;AAMA,YAAI1E,KAAK,CAACmD,OAAV,EACInD,KAAK,CAACmD,OAAN,CAAcV,SAAd,IAA2BkC,IAA3B;AACJD,QAAAA,CAAC,IAAIxF,GAAG,IAAIO,iBAAiB,GAAG,CAAxB,CAAR;AACH;;AAED,UAAImF,CAAC,GAAG,CAAR;;AACA,WAAK,IAAIrB,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG/D,YAApB,EAAkC+D,EAAC,EAAnC,EAAuC;AACnC,YAAIzC,WAAS,GAAGmB,IAAI,CAACgB,KAAL,CAAY3D,QAAQ,GAAGJ,GAAZ,GAAmB0F,CAA9B,IAAiCrF,YAAjD;;AACA,YAAIoF,KAAI,GAAG,iBAAiB7D,WAAjB,GAA6B,2BAA7B,GAA2DA,WAA3D,GAAuE,uBAAvE,GAAgGY,kBAAkB,CAACF,KAAnH,GAA0H,2BAA1H,GACP,0BADO,GAEP,QAFJ;;AAGA,YAAIxB,KAAK,CAACmD,OAAV,EACInD,KAAK,CAACmD,OAAN,CAAcV,SAAd,IAA2BkC,KAA3B;AACJC,QAAAA,CAAC,IAAI1F,GAAG,IAAIM,YAAY,GAAG,CAAnB,CAAR;AACH;;AAED,UAAIqF,QAAQ,GAAGC,QAAQ,CAACC,sBAAT,CAAgC,eAAhC,CAAf;AACA,UAAIC,YAAY,GAAGH,QAAQ,CAAC,CAAD,CAAR,CAAYZ,UAAZ,CAAuB,CAAvB,CAAnB;AACA,UAAIgB,iBAAiB,GAAG,CAAxB;AACApG,MAAAA,KAAK,CAAC;AACF8E,QAAAA,OAAO,EAAEkB,QAAQ,CAAC,CAAD,CAAR,CAAYZ,UAAZ,CAAuB,CAAvB,CADP;AAEFL,QAAAA,KAAK,EAAE,CACH;AAACC,UAAAA,KAAK,EAAE,GAAR;AAAaC,UAAAA,MAAM,EAAE,aAArB;AAAoCC,UAAAA,QAAQ,EAAE;AAA9C,SADG,CAFL;AAKFC,QAAAA,KAAK,EAAE;AALL,OAAD,CAAL;AAQA,UAAIkB,QAAQ,GAAGJ,QAAQ,CAACC,sBAAT,CAAgC,MAAhC,CAAf;AACA,UAAMI,KAAK,GAAG,CAAC,EAAD,EAAK,EAAL,EAAS,GAAT,CAAd;AACA,UAAMC,MAAM,GAAG,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,CAAf;;AAEA,WAAK,IAAI7B,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAG2B,QAAQ,CAAC1B,MAA7B,EAAqCD,GAAC,EAAtC,EAA0C;AACtC,YAAI8B,OAAO,GAAK9B,GAAD,IAAO2B,QAAQ,CAAC1B,MAAT,GAAkB,CAAzB,CAAf;AAEA,YAAI8B,GAAG,GAAGH,KAAK,CAAC,CAAD,CAAL,GAAWE,OAAO,IAAID,MAAM,CAAC,CAAD,CAAN,GAAYD,KAAK,CAAC,CAAD,CAArB,CAA5B;AACA,YAAII,KAAK,GAAGJ,KAAK,CAAC,CAAD,CAAL,GAAWE,OAAO,IAAID,MAAM,CAAC,CAAD,CAAN,GAAYD,KAAK,CAAC,CAAD,CAArB,CAA9B;AACA,YAAIK,IAAI,GAAGL,KAAK,CAAC,CAAD,CAAL,GAAWE,OAAO,IAAID,MAAM,CAAC,CAAD,CAAN,GAAYD,KAAK,CAAC,CAAD,CAArB,CAA7B;;AAEAD,QAAAA,QAAQ,CAAC3B,GAAD,CAAR,CAAYkC,YAAZ,CAAyB,OAAzB,EAAkC,gBAAgB,MAAhB,GAAyBH,GAAzB,GAA+B,GAA/B,GAAqCC,KAArC,GAA6C,GAA7C,GAAmDC,IAAnD,GAA0D,IAA5F;AACH;;AACD;AAEAnF,MAAAA,aAAa,CAACwE,QAAD,CAAb;;AACA,UAAMa,eAAe,GAAG,SAAlBA,eAAkB,CAAC/C,KAAD,EAAmB;AACvCA,QAAAA,KAAK,GAAGV,IAAI,CAACgB,KAAL,CAAWN,KAAX,CAAR;;AAEA,YAAIA,KAAK,IAAIrD,QAAT,IAAqBqD,KAAK,IAAItD,QAAlC,EAA4C;AACxC,eAAK,IAAIkE,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGsB,QAAQ,CAACrB,MAA7B,EAAqCD,GAAC,EAAtC,EAA0C;AAEtC,gBAAIE,cAAc,GAAG,UAASoB,QAAQ,CAACtB,GAAD,CAAR,CAAYG,YAAZ,CAAyB,QAAzB,CAAT,CAArB;;AACA,gBAAKD,cAAc,GAAGwB,iBAAjB,IAAsCxB,cAAc,IAAId,KAAzD,IAAoEc,cAAc,GAAGwB,iBAAjB,IAAsCtC,KAAK,IAAIc,cAAvH,EAAwI;AACpI5E,cAAAA,KAAK,CAAC;AACF8E,gBAAAA,OAAO,EAAEqB,YADP;AAEFpB,gBAAAA,KAAK,EAAE,CACH;AAACC,kBAAAA,KAAK,EAAE,CAAR;AAAWC,kBAAAA,MAAM,EAAE,eAAnB;AAAoCC,kBAAAA,QAAQ,EAAE;AAA9C,iBADG,CAFL;AAKFC,gBAAAA,KAAK,EAAE;AALL,eAAD,CAAL;AAOAnF,cAAAA,KAAK,CAAC;AACF8E,gBAAAA,OAAO,EAAEkB,QAAQ,CAACtB,GAAD,CAAR,CAAYU,UAAZ,CAAuB,CAAvB,CADP;AAEFL,gBAAAA,KAAK,EAAE,CACH;AAACC,kBAAAA,KAAK,EAAE,GAAR;AAAaC,kBAAAA,MAAM,EAAE,aAArB;AAAoCC,kBAAAA,QAAQ,EAAE;AAA9C,iBADG,CAFL;AAKFC,gBAAAA,KAAK,EAAE;AALL,eAAD,CAAL;AAOAgB,cAAAA,YAAY,GAAGH,QAAQ,CAACtB,GAAD,CAAR,CAAYU,UAAZ,CAAuB,CAAvB,CAAf;AACAgB,cAAAA,iBAAiB,GAAGxB,cAApB;AACA;AACH;AAEJ;;AACD,WAzBwC,CA0BxC;AACH;AACJ,OA/BD;;AAiCA,UAAIkC,cAAc,GAAG;AACjB9B,QAAAA,KAAK,EAAE;AADU,OAArB;AAIAhF,MAAAA,KAAK,CAAC;AACF8E,QAAAA,OAAO,EAAEgC,cADP;AAEF9B,QAAAA,KAAK,EAAIvE,QAAQ,GAAGJ,GAAZ,GAAmBqF,SAFzB;AAGFT,QAAAA,MAAM,EAAE,QAHN;AAIFC,QAAAA,QAAQ,EAAE,GAJR;AAKFI,QAAAA,MAAM,EAAE,kBAAY;AAChBuB,UAAAA,eAAe,CAACC,cAAc,CAAC9B,KAAhB,CAAf;AACH,SAPC;AAQFO,QAAAA,QAAQ,EAAE,oBAAY;AAClB7D,UAAAA,WAAW,CAACyE,YAAD,CAAX;AACAvE,UAAAA,gBAAgB,CAACwE,iBAAD,CAAhB;;AAEA,cAAGV,SAAS,IAAEE,SAAd,EAAyB;AACrBxD,YAAAA,eAAe,CAACsD,SAAD,CAAf;AACA1D,YAAAA,eAAe,CAAGvB,QAAQ,GAAGJ,GAAZ,GAAmBqF,SAApB,GAA+BhF,YAAhC,CAAf;AACH;;AAED8B,UAAAA,aAAa,CAAC,KAAD,CAAb;AACH;AAlBC,OAAD,CAAL;AAoBH;AACJ,GAjHQ,EAiHP,CAACrC,KAAK,CAACwF,YAAP,CAjHO,CAAT;AAmHA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,EAAE,EAAC,MAAR;AAAe,IAAA,WAAW,EAAE9B,MAA5B;AAAoC,IAAA,SAAS,EAAEY,SAA/C;AAA0D,IAAA,KAAK,EAAEhC,aAAjE;AAAA,wCAA0F,WAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,EAAE,EAAC,UAAR;AAAmB,IAAA,KAAK,EAAEK,YAA1B;AAAwC,IAAA,KAAK,EAAC,4BAA9C;AAA2E,IAAA,OAAO,EAAC,mBAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAQ,mCAAiC3C,KAAK,CAACW,KAAN,IAAa,CAAb,GAAe,OAAf,GAAuB,OAAxD,IAAiE,8DAAzE,CADJ,CADJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJJ,EAKI;AAAG,IAAA,EAAE,EAAC,UAAN;AAAiB,iBAAU,UAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,EAAE,EAAC,YAAN;AAAmB,iBAAU,UAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAA+B,IAAA,EAAE,EAAC,OAAlC;AAA0C,IAAA,EAAE,EAAC,OAA7C;AAAqD,IAAA,CAAC,EAAC,MAAvD;AAA8D,IAAA,KAAK,EAAE;AAACwC,MAAAA,SAAS,EAACJ,cAAc,CAACI,SAA1B;AAAoCyD,MAAAA,eAAe,EAAC;AAApD,KAArE;AAAoI,IAAA,eAAe,EAAE7D,cAAc,CAACC,YAApK;AAAkL,IAAA,gBAAgB,EAAED,cAAc,CAACK,SAAnN;AAAA,wCAAkB,YAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CALJ,CADJ,EAYI;AAAK,IAAA,GAAG,EAAEpC,KAAV;AAAiB,IAAA,EAAE,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAEyB,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,EAcI;AAAK,IAAA,GAAG,EAAEvB,IAAV;AAAgB,IAAA,EAAE,EAAC,MAAnB;AAA0B,IAAA,KAAK,EAAE0B,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,GAAG,EAAEzB,MAAV;AAAkB,IAAA,WAAW,EAAE+C,MAA/B;AAAuC,IAAA,EAAE,EAAC,QAA1C;AAAmD,IAAA,KAAK,EAAErB,UAA1D;AAAsE,IAAA,KAAK,EAAC,4BAA5E;AAAyG,IAAA,OAAO,EAAC,iBAAjH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAQ,kBAAgBjC,WAAhB,GAA4B,GAApC,CADJ,CADJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJJ,EAKI;AAAG,IAAA,EAAE,EAAC,UAAN;AAAiB,iBAAU,UAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,EAAE,EAAC,YAAN;AAAmB,iBAAU,UAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAA2B,IAAA,EAAE,EAAC,OAA9B;AAAsC,IAAA,EAAE,EAAC,OAAzC;AAAiD,IAAA,CAAC,EAAC,OAAnD;AAAA,wCAAkB,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CALJ,CADJ,CAdJ,EA2BI;AAAA,wCAAgB,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAG;AAAM,IAAA,GAAG,EAAEK,UAAX;AAAuB,IAAA,KAAK,EAAE;AAACoD,MAAAA,aAAa,EAAC;AAAf,KAA9B;AAAqD,IAAA,MAAM,EAAEhB,YAA7D;AAA2E,IAAA,eAAe,MAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,EAA+F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA/F,CADJ,CA3BJ,CADJ,EAgCI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAQ,+CAA6CrD,KAAK,CAACW,KAAN,IAAa,CAAb,GAAe,OAAf,GAAuB,OAApE,IAA6E,GAArF,CAhCJ;AAAA;AAAA;AAAA,0tzBADJ;AA8HH;;AAED,eAAeZ,SAAf","sourcesContent":["import React, {useEffect, useRef, useState,MouseEvent,SyntheticEvent} from \"react\";\r\nimport anime from \"animejs\";\r\nimport {firebase} from \"../firebase\";\r\nimport ITermostat from \"../interfaces/ITermostat\";\r\nimport {number} from \"prop-types\";\r\nimport {useTheme} from \"@material-ui/styles\";\r\n\r\nfunction Termostat(props:ITermostat){\r\n    const min = 0;\r\n    const max = 50;\r\n    const componentWidth = 337;\r\n    const componentHeight = 337;\r\n    const minAngle = 0;\r\n    const maxAngle = 270;\r\n    const angleOverlap = (maxAngle-180)/2;\r\n    const lineSegCount = 25//11;\r\n    const valueLineSegCount = (16*2)+1;\r\n    const valueLineSegBigEach = 8;\r\n    const theme = useTheme();\r\n    // @ts-ignore\r\n    const handleColor = theme.palette.primary.main;\r\n\r\n    const lines = useRef<HTMLDivElement>(null);\r\n    const valueInput = useRef<HTMLInputElement>(null);\r\n    const hand = useRef<HTMLDivElement>(null);\r\n    const handle = useRef<SVGSVGElement>(null);\r\n\r\n    const [containers,setContainers] = useState<HTMLCollectionOf<Element>>();\r\n\r\n    const [lastNode,setLastNode] = useState<ChildNode>();\r\n    const [lastNodeAngle,setLastNodeAngle] = useState<number>(0);\r\n    const [angleTrans,setAngleTrans] = useState<number>(0);\r\n    const [currentAngle,setCurrentAngle] = useState<number>(0);\r\n    const [handAngle,setHandAngle] = useState<number>(0);\r\n    const [currentValue,setCurrentValue] = useState<number>(0);\r\n    const [drag,setDrag] = useState<boolean>(false);\r\n    const [initialize,setInitialize] = useState<boolean>(true);\r\n\r\n    const workspaceSize = {\r\n        height:componentHeight+\"px\",\r\n        width:componentWidth+\"px\"\r\n    };\r\n\r\n    const linesSize = {\r\n        width:componentWidth+\"px\"\r\n    };\r\n\r\n    const lineContainerSizes = {\r\n        width: componentWidth/2+\"px\"\r\n    };\r\n\r\n    const handPathSize = {\r\n        width: componentWidth/3+\"px\",\r\n        height: componentHeight/3+\"px\"\r\n    };\r\n\r\n    const handSize = {\r\n        width: componentWidth/2+\"px\"\r\n    };\r\n\r\n    const handleSize = {\r\n        right: (componentWidth/2)/3+\"px\"\r\n    };\r\n\r\n    const handPathCircle = {\r\n        circleRadius:2*Math.PI*80.6,\r\n        transform:\"rotate(\"+-angleOverlap+\"deg)\",\r\n        maxRadius:(2*Math.PI*80.6)-(((2*Math.PI*80.6)/360)*maxAngle)\r\n    };\r\n\r\n    function inputUpdated(e:any){\r\n        let val = Number.parseInt(e.target.innerHTML);\r\n        setCurrentValue(val);\r\n        setCurrentAngle((((maxAngle)/max)*val)-(angleOverlap));\r\n    }\r\n\r\n    function onMove(e:MouseEvent){\r\n        if(drag){\r\n            let angle = Math.atan2(e.nativeEvent.offsetY-(componentHeight/2), e.nativeEvent.offsetX-(componentWidth/2));\r\n            let angle2 = angle * (180/Math.PI);\r\n            //to 360 range\r\n            if(angle2 < 0)\r\n            {\r\n                angle2 = 360-(-angle2);\r\n            }\r\n            //set 0 angle\r\n            angle2+= 180;\r\n            //corect angle\r\n            if(angle2 > 360)\r\n                angle2-=360\r\n\r\n            angle2=(maxAngle-angle2);\r\n            if(angle2 < 0)\r\n                angle2 = (angleOverlap-((360-maxAngle) + angle2));\r\n            else\r\n                angle2=-(angle2-maxAngle-angleOverlap);\r\n\r\n            if(angle2 >= (minAngle) && angle2 <= (maxAngle)) {\r\n                setCurrentValue(Math.round(((max / maxAngle) * angle2)));\r\n                setAngleTrans(angle2-angleOverlap);\r\n                setHandAngle(angle2-angleOverlap);\r\n            }\r\n        }\r\n    }\r\n\r\n    function onDrag(e:MouseEvent){\r\n        if(!drag) {\r\n            setDrag(true);\r\n            if(handle.current)\r\n            handle.current.style.pointerEvents= \"none\";\r\n        }\r\n    }\r\n\r\n    function onDragEnd(e:MouseEvent){\r\n        if(drag){\r\n            setDrag(false);\r\n            if(handle.current)\r\n            handle.current.style.pointerEvents=\"all\";\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(containers) {\r\n            let angle = Math.round(handAngle);\r\n            if (angle <= (maxAngle) && angle >= (minAngle-angleOverlap)) {\r\n                for (let i = 0; i < containers.length; i++) {\r\n\r\n                    let containerAngle = parseInt(containers[i].getAttribute('rotate') as string);\r\n                    if ((containerAngle > lastNodeAngle && containerAngle <= angle) || (containerAngle < lastNodeAngle && angle <= containerAngle)) {\r\n                        anime({\r\n                            targets: lastNode,\r\n                            scale: [\r\n                                {value: 1, easing: 'easeInOutQuad', duration: 500}\r\n                            ],\r\n                            delay: 0,\r\n                        });\r\n                        anime({\r\n                            targets: containers[i].childNodes[0],\r\n                            scale: [\r\n                                {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n                            ],\r\n                            delay: 0,\r\n                        });\r\n                        setLastNode(containers[i].childNodes[0]);\r\n                        setLastNodeAngle(containerAngle);\r\n                        break;\r\n                    }\r\n\r\n                }\r\n                ;\r\n                if(hand.current)\r\n                hand.current.style.transform = \"rotate(\" + angle + \"deg)\";\r\n            }\r\n        }\r\n    },[handAngle]);\r\n\r\n    useEffect(()=>{\r\n        let anim = {\r\n            value:angleTrans\r\n        };\r\n\r\n        anime({\r\n            targets:anim,\r\n            value:(currentAngle),\r\n            easing:\"linear\",\r\n            duration:500,\r\n            update:function(){\r\n                //updateHandAngle(anim.value);\r\n                setHandAngle(anim.value);\r\n            },\r\n            complete:()=>{\r\n                setAngleTrans(currentAngle);\r\n            }\r\n        });\r\n    },[currentAngle]);\r\n\r\n    useEffect(()=>{\r\n        if(valueInput.current)\r\n        valueInput.current.innerHTML = currentValue.toString();\r\n        if(!initialize)\r\n        props.onValueChanged(Number.parseInt(currentValue.toString()));\r\n    },[currentValue]);\r\n\r\n    useEffect(()=>{\r\n        let initValue = props.defaultValue;\r\n        if(initValue!=undefined) {\r\n            let k = 0;\r\n            for (let i = 0; i < valueLineSegCount; i++) {\r\n                let handAngle = Math.round((maxAngle / max) * k)-angleOverlap;\r\n                let line = '<div style=\"transform:rotate(' + handAngle + 'deg)!important;width:'+(lineContainerSizes.width)+';\" class=\"valueLineContainer\">' +\r\n                    '<div class=\"valueLineGroup\">' +\r\n                    '<div class='+((i%valueLineSegBigEach==0)?\"bigValueLine\":\"smallValueLine\")+'></div>' +\r\n                    '<div class=\"value\" style=\"transform:rotate(' + -handAngle + 'deg)\">'+((i%valueLineSegBigEach==0)?Math.round(k):\"\")+'</div>' +\r\n                    '</div>'+\r\n                    '</div>';\r\n                if (lines.current)\r\n                    lines.current.innerHTML += line;\r\n                k += max / (valueLineSegCount - 1);\r\n            }\r\n\r\n            let j = 0;\r\n            for (let i = 0; i < lineSegCount; i++) {\r\n                let handAngle = Math.round((maxAngle / max) * j)-angleOverlap;\r\n                let line = '<div rotate=' + handAngle + ' style=\"transform:rotate(' + handAngle + 'deg)!important;width:'+(lineContainerSizes.width)+';\" class=\"lineContainer\">' +\r\n                    '<div class=\"line\"></div>' +\r\n                    '</div>';\r\n                if (lines.current)\r\n                    lines.current.innerHTML += line;\r\n                j += max / (lineSegCount - 1);\r\n            }\r\n\r\n            let contData = document.getElementsByClassName('lineContainer');\r\n            let initlastNode = contData[0].childNodes[0];\r\n            let initLastNodeAngle = 0;\r\n            anime({\r\n                targets: contData[0].childNodes[0],\r\n                scale: [\r\n                    {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n                ],\r\n                delay: 0,\r\n            });\r\n\r\n            let lineSegs = document.getElementsByClassName(\"line\");\r\n            const first = [73, 80, 245];\r\n            const second = [244, 67, 54];\r\n\r\n            for (let i = 0; i < lineSegs.length; i++) {\r\n                var percent = ((i) / (lineSegs.length - 1));\r\n\r\n                var red = first[0] + percent * (second[0] - first[0]);\r\n                var green = first[1] + percent * (second[1] - first[1]);\r\n                var blue = first[2] + percent * (second[2] - first[2]);\r\n\r\n                lineSegs[i].setAttribute(\"style\", \"background:\" + \"rgb(\" + red + \",\" + green + \",\" + blue + \");\");\r\n            }\r\n            ;\r\n\r\n            setContainers(contData);\r\n            const updateHandAngle = (angle: number) => {\r\n                angle = Math.round(angle);\r\n\r\n                if (angle <= maxAngle && angle >= minAngle) {\r\n                    for (let i = 0; i < contData.length; i++) {\r\n\r\n                        let containerAngle = parseInt(contData[i].getAttribute('rotate') as string);\r\n                        if ((containerAngle > initLastNodeAngle && containerAngle <= angle) || (containerAngle < initLastNodeAngle && angle <= containerAngle)) {\r\n                            anime({\r\n                                targets: initlastNode,\r\n                                scale: [\r\n                                    {value: 1, easing: 'easeInOutQuad', duration: 500}\r\n                                ],\r\n                                delay: 0,\r\n                            });\r\n                            anime({\r\n                                targets: contData[i].childNodes[0],\r\n                                scale: [\r\n                                    {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n                                ],\r\n                                delay: 0,\r\n                            });\r\n                            initlastNode = contData[i].childNodes[0];\r\n                            initLastNodeAngle = containerAngle;\r\n                            break;\r\n                        }\r\n\r\n                    }\r\n                    ;\r\n                    //document.getElementById(\"hand\").style.transform=\"rotate(\"+(angle)+\"deg)\";\r\n                }\r\n            };\r\n\r\n            let initAngleTrans = {\r\n                value: 0\r\n            }\r\n\r\n            anime({\r\n                targets: initAngleTrans,\r\n                value: ((maxAngle / max) * initValue),\r\n                easing: \"linear\",\r\n                duration: 500,\r\n                update: function () {\r\n                    updateHandAngle(initAngleTrans.value);\r\n                },\r\n                complete: function () {\r\n                    setLastNode(initlastNode);\r\n                    setLastNodeAngle(initLastNodeAngle);\r\n\r\n                    if(initValue!=undefined) {\r\n                        setCurrentValue(initValue);\r\n                        setCurrentAngle(((maxAngle / max) * initValue)-angleOverlap);\r\n                    }\r\n\r\n                    setInitialize(false);\r\n                }\r\n            });\r\n        }\r\n    },[props.defaultValue]);\r\n\r\n    return(\r\n        <div>\r\n            <div id=\"work\" onMouseMove={onMove} onMouseUp={onDragEnd} style={workspaceSize} className=\"workspace\">\r\n                <svg id=\"handPath\" style={handPathSize} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 161.45 161.45\">\r\n                    <defs>\r\n                        <style>{\".pathcircle{fill:none;stroke:\"+(props.theme==1?\"white\":\"black\")+\";stroke-miterlimit:10;stroke-opacity:0.08;stroke-width:3px;}\"}</style>\r\n                    </defs>\r\n                    <title>Datov zdroj 22</title>\r\n                    <g id=\"Vrstva_2\" data-name=\"Vrstva 2\">\r\n                        <g id=\"Vrstva_2-2\" data-name=\"Vrstva 2\">\r\n                            <circle className=\"pathcircle\" cx=\"80.73\" cy=\"80.73\" r=\"80.6\" style={{transform:handPathCircle.transform,transformOrigin:\"center\"}} strokeDasharray={handPathCircle.circleRadius} strokeDashoffset={handPathCircle.maxRadius}/>\r\n                        </g>\r\n                    </g>\r\n                </svg>\r\n                <div ref={lines} id=\"lines\" style={linesSize}>\r\n                </div>\r\n                <div ref={hand} id=\"hand\" style={handSize}>\r\n                    <svg ref={handle} onMouseDown={onDrag} id=\"handle\" style={handleSize} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26.04 26.04\">\r\n                        <defs>\r\n                            <style>{\".handle{fill:\"+handleColor+\"}\"}</style>\r\n                        </defs>\r\n                        <title>Datov zdroj 25</title>\r\n                        <g id=\"Vrstva_2\" data-name=\"Vrstva 2\">\r\n                            <g id=\"Vrstva_2-2\" data-name=\"Vrstva 2\">\r\n                                <circle className=\"handle\" cx=\"13.02\" cy=\"13.02\" r=\"13.02\"/>\r\n                            </g>\r\n                        </g>\r\n                    </svg>\r\n                </div>\r\n                <div className={\"valueGroup\"}>\r\n                    <p><span ref={valueInput} style={{pointerEvents:\"all\"}} onBlur={inputUpdated} contentEditable/><span>C</span></p>\r\n                </div>\r\n            </div>\r\n            <style>{\".smallValueLine,.bigValueLine{background:\"+(props.theme==1?\"white\":\"black\")+\"}\"}</style>\r\n            <style jsx global>{`\r\n                .workspace{\r\n                  background:/*#212121*/none;\r\n                  //height:500px;\r\n                  //width:500px;\r\n                  margin:auto;\r\n                  position:relative;\r\n                  border-radius:100%;\r\n                }\r\n                .workspace .valueGroup{\r\n                  position: absolute;\r\n                  margin: 0px;\r\n                  margin-top: 50%;\r\n                  margin-left: 50%;\r\n                  transform: translate(-50%, -50%);\r\n                  font-size: 2rem;\r\n                }\r\n                #lines,#handPath,.lineContainer,.valueLineContainer,.valueGroup{\r\n                  pointer-events: none;\r\n                  overflow:visible;\r\n                }\r\n                #handPath{\r\n                  width:5rem;\r\n                  height:5rem;\r\n                }\r\n                #lines{\r\n                  position:absolute;\r\n                  height:0px;\r\n                  //width:500px;\r\n                  margin-top:50%;\r\n                }\r\n                .lineContainer,.valueLineContainer{\r\n                  //width: 250px;\r\n                  height:0;\r\n                  position:absolute;\r\n                  display:flex;\r\n                  align-items:center;\r\n                  flex-direction:row;\r\n                  transform-origin: right center;\r\n                }\r\n                .line{\r\n                  height:5px;\r\n                  width:2rem;\r\n                  margin-left:0.5rem;\r\n                  transform-origin: right center;\r\n                }\r\n                .smallValueLine{\r\n                  height: 2px;\r\n                  width: 0.5rem;\r\n                  margin-left: 3.5rem;\r\n                  opacity:0.2;\r\n                }\r\n                .bigValueLine{\r\n                  height: 2px;\r\n                  width: 1rem;\r\n                  margin-left: 3.5rem;\r\n                  opacity:0.2;\r\n                }\r\n                .valueLineGroup{\r\n                  display: flex;\r\n                  flex-direction: row;\r\n                  align-items: center;\r\n                }\r\n                .value{\r\n                    margin-left:0.5rem;\r\n                }\r\n                #handPath{\r\n                  //width: 250px;\r\n                  //height: 250px;\r\n                  margin: 50%;\r\n                  transform: translate(-50%,-50%)rotate(180deg);\r\n                  position: absolute;\r\n                }\r\n                #hand{\r\n                  margin-top:50%;\r\n                  background:red;\r\n                  transform-origin: right center;\r\n                  position:absolute;\r\n                  //width:250px;\r\n                  height:0;\r\n                }\r\n                #handle{\r\n                  cursor: grab;\r\n                  width:2rem;\r\n                  height:2rem;\r\n                  transform:translate(50%,-50%);\r\n                  right: 50%;\r\n                  position:absolute;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Termostat;"]},"metadata":{},"sourceType":"module"}