{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Jakub Sedlak\\\\WebstormProjects\\\\projekt_CP - typescript\\\\components\\\\WithAuth.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport router from 'next/router';\nimport { auth } from '../firebase/index';\nimport Loading from \"./Loading\";\n\nvar withAuth = function withAuth(Component) {\n  return (\n    /*#__PURE__*/\n    function (_React$Component) {\n      _inherits(_class, _React$Component);\n\n      function _class(props) {\n        var _this;\n\n        _classCallCheck(this, _class);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(_class).call(this, props));\n        _this.state = {\n          status: 'LOADING'\n        };\n        return _this;\n      }\n\n      _createClass(_class, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          auth.onAuthStateChanged(function (authUser) {\n            if (authUser) {\n              _this2.setState({\n                status: 'SIGNED_IN'\n              });\n            } else {\n              router.push('/login');\n            }\n          });\n        }\n      }, {\n        key: \"renderContent\",\n        value: function renderContent() {\n          // @ts-ignore\n          var status = this.state.status;\n\n          if (status == 'LOADING') {\n            return __jsx(\"div\", {\n              style: {\n                position: \"absolute\",\n                width: \"100%\",\n                height: \"100%\"\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 30\n              },\n              __self: this\n            }, __jsx(Loading, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 30\n              },\n              __self: this\n            }));\n          } else if (status == 'SIGNED_IN') {\n            // @ts-ignore\n            return __jsx(Component, _extends({\n              user: auth.currentUser.uid\n            }, this.props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 33\n              },\n              __self: this\n            }));\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return __jsx(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 38\n            },\n            __self: this\n          }, this.renderContent());\n        }\n      }]);\n\n      return _class;\n    }(React.Component)\n  );\n};\n\nexport default withAuth;","map":{"version":3,"sources":["C:/Users/Jakub Sedlak/WebstormProjects/projekt_CP - typescript/components/WithAuth.tsx"],"names":["React","router","auth","Loading","withAuth","Component","props","state","status","onAuthStateChanged","authUser","setState","push","position","width","height","currentUser","uid","renderContent"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAyD,OAAzD;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAGA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,SAAD,EAAwC;AACrD;AAAA;AAAA;AAAA;;AACI,sBAAYC,KAAZ,EAAuB;AAAA;;AAAA;;AACnB,oFAAMA,KAAN;AACA,cAAKC,KAAL,GAAa;AACTC,UAAAA,MAAM,EAAE;AADC,SAAb;AAFmB;AAKtB;;AANL;AAAA;AAAA,4CAOwB;AAAA;;AAChBN,UAAAA,IAAI,CAACO,kBAAL,CAAwB,UAAAC,QAAQ,EAAI;AAChC,gBAAGA,QAAH,EAAa;AACT,cAAA,MAAI,CAACC,QAAL,CAAc;AACVH,gBAAAA,MAAM,EAAE;AADE,eAAd;AAGH,aAJD,MAIM;AACFP,cAAAA,MAAM,CAACW,IAAP,CAAY,QAAZ;AACH;AACJ,WARD;AASH;AAjBL;AAAA;AAAA,wCAkBoB;AACZ;AADY,cAEJJ,MAFI,GAEO,KAAKD,KAFZ,CAEJC,MAFI;;AAGZ,cAAGA,MAAM,IAAI,SAAb,EAAwB;AACpB,mBAAO;AAAK,cAAA,KAAK,EAAE;AAACK,gBAAAA,QAAQ,EAAC,UAAV;AAAqBC,gBAAAA,KAAK,EAAC,MAA3B;AAAkCC,gBAAAA,MAAM,EAAC;AAAzC,eAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAA8D,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA9D,CAAP;AACH,WAFD,MAEM,IAAGP,MAAM,IAAI,WAAb,EAA0B;AAC5B;AACA,mBAAO,MAAC,SAAD;AAAW,cAAA,IAAI,EAAEN,IAAI,CAACc,WAAL,CAAiBC;AAAlC,eAA4C,KAAKX,KAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;AACH;AACJ;AA3BL;AAAA;AAAA,iCA4Ba;AACL,iBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACK,KAAKY,aAAL,EADL,CADJ;AAKH;AAlCL;;AAAA;AAAA,MAAqBlB,KAAK,CAACK,SAA3B;AAAA;AAoCH,CArCD;;AAsCA,eAAeD,QAAf","sourcesContent":["import React, {ReactComponentElement, ReactElement} from 'react';\r\nimport router from 'next/router';\r\nimport { auth } from '../firebase/index';\r\nimport Loading from \"./Loading\";\r\nimport {namedTypes} from \"ast-types\";\r\n\r\nconst withAuth = (Component:React.ComponentType<any>) => {\r\n    return class extends React.Component {\r\n        constructor(props:any) {\r\n            super(props);\r\n            this.state = {\r\n                status: 'LOADING',\r\n            };\r\n        }\r\n        componentDidMount() {\r\n            auth.onAuthStateChanged(authUser => {\r\n                if(authUser) {\r\n                    this.setState({\r\n                        status: 'SIGNED_IN'\r\n                    });\r\n                }else {\r\n                    router.push('/login');\r\n                }\r\n            });\r\n        }\r\n        renderContent() {\r\n            // @ts-ignore\r\n            const { status } = this.state;\r\n            if(status == 'LOADING') {\r\n                return <div style={{position:\"absolute\",width:\"100%\",height:\"100%\"}}><Loading/></div>;\r\n            }else if(status == 'SIGNED_IN') {\r\n                // @ts-ignore\r\n                return <Component user={auth.currentUser.uid} { ...this.props } />\r\n            }\r\n        }\r\n        render() {\r\n            return (\r\n                <div>\r\n                    {this.renderContent()}\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n}\r\nexport default withAuth;"]},"metadata":{},"sourceType":"module"}