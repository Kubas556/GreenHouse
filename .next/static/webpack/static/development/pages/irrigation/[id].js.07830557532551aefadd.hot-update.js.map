{"version":3,"file":"static/webpack/static\\development\\pages\\irrigation\\[id].js.07830557532551aefadd.hot-update.js","sources":["webpack:///./components/AirHumidity.tsx","webpack:///./pages/irrigation/.tsx"],"sourcesContent":["import React, {useRef} from \"react\";\r\n//@ts-ignore\r\nimport anime from 'animejs';\r\nimport {useState,useEffect} from \"react\";\r\nimport IAirHumudity from \"../interfaces/IAirHumudity\";\r\n\r\n\r\n/*type Props = {\r\n    width:String\r\n}*/\r\n\r\nconst AirHumidity = (props:IAirHumudity) => {\r\n    const componentWidth = 337;\r\n    const componentHeight = 337;\r\n    const minY = 176.4;\r\n    const maxY = 18;\r\n    const [currentValue,setCurrentValue] = useState(props.value?props.value:0);\r\n    const [currentY,setCurrentY] = useState(minY);\r\n    const [animX1,setAnimX1] = useState({x:60.15});\r\n    const [animX2,setAnimX2] = useState({x:60.15});\r\n    const wave1 = useRef<SVGPathElement>(null);\r\n    const wave2 = useRef<SVGPathElement>(null);\r\n    const percentageLine = useRef<SVGLineElement>(null);\r\n    const percentageLine2 = useRef<SVGLineElement>(null);\r\n    const percentageLevel = useRef<SVGPathElement>(null);\r\n    const percentageText = useRef<SVGTextElement>(null);\r\n    const waveGap = 125;\r\n\r\n    function setValue(val:number) {\r\n        let value = maxY + ((minY-maxY)/100)*(100-val)\r\n        let percentage = Math.round(100-(((value-maxY)/(minY-maxY))*100));\r\n        setCurrentY(percentage>0?value:(minY+150));\r\n\r\n        if(percentageLine.current) {\r\n            percentageLine.current.setAttribute(\"y1\", value.toString());\r\n            percentageLine.current.setAttribute(\"y2\", value.toString());\r\n        }\r\n\r\n        if(percentageLine2.current) {\r\n            percentageLine2.current.setAttribute(\"y1\", value.toString());\r\n            percentageLine2.current.setAttribute(\"y2\", value.toString());\r\n        }\r\n\r\n        if(percentageLevel.current)\r\n        percentageLevel.current.setAttribute(\r\n            \"d\",\r\n            \"M107.87,\"+value+\"V178H-2.5V\"+value+\"Z\"\r\n        );\r\n\r\n        if(percentageText.current) {\r\n            percentageText.current.setAttribute(\r\n                \"transform\",\r\n                \"translate(168.67 \" + (value - 2.5) + \")\"\r\n            );\r\n            percentageText.current.innerHTML = percentage + \"%\";\r\n        }\r\n    }\r\n\r\n    anime({\r\n        targets: animX1,\r\n        x: [60.15,100],\r\n        direction: 'alternate',\r\n        duration: 7000,\r\n        easing: 'easeInOutQuad',\r\n        loop: true,\r\n        update: function() {\r\n            if(wave2.current)\r\n            wave2.current.setAttribute(\r\n                \"transform\",\r\n                \"translate(\"+animX1.x+\",\"+(currentY-waveGap)+\")\"\r\n            );\r\n        }\r\n    });\r\n    anime({\r\n        targets: animX2,\r\n        x: [60.15,30],\r\n        direction: 'alternate',\r\n        duration: 5000,\r\n        easing: 'easeInOutQuad',\r\n        loop: true,\r\n        update: function() {\r\n            if(wave1.current)\r\n            wave1.current.setAttribute(\r\n                \"transform\",\r\n                \"translate(\"+animX2.x+\",\"+(currentY-waveGap)+\")\"\r\n            );\r\n        }\r\n    });\r\n\r\n    /*useEffect(() => {\r\n        setValue(0);\r\n    },[]);*/\r\n\r\n    useEffect(() => {\r\n        const animParam = {\r\n            value:currentValue\r\n        };\r\n        anime({\r\n           targets: animParam,\r\n           value:props.value?props.value:0,\r\n           update: function() {\r\n               setValue(animParam.value);\r\n               setCurrentValue(animParam.value);\r\n           }\r\n        });\r\n    },[props.value]);\r\n\r\n    return (\r\n        <div>\r\n            <svg viewBox=\"0 0 225.68 211.24\" style={{width:props.width}}>\r\n                <defs>\r\n                    <style>{\".cls-1-vlh-vz,.cls-7-vlh-vz,.cls-8-vlh-vz{fill:none;}.cls-2-vlh-vz{font-size:12px;fill:#fff;font-family:CenturyGothic, Century Gothic;}.cls-3-vlh-vz{clip-path:url(#clip-path-vlh-pud);}.cls-4-vlh-vz,.cls-5-vlh-vz,.cls-6-vlh-vz{fill:#18b8d4;}.cls-5-vlh-vz{opacity:0.2;}.cls-6-vlh-vz{opacity:0.4;}.cls-7-vlh-vz,.cls-8-vlh-vz{stroke:#fff;stroke-miterlimit:10;}.cls-7-vlh-vz{stroke-width:0.25px;}.cls-8-vlh-vz{stroke-opacity:0.49;}\"}</style>\r\n                    <clipPath id=\"clip-path-vlh-pud\" transform=\"translate(60.15)\">\r\n                        <path className=\"cls-1-vlh-vz\" d=\"M97.89,131.23a45.2,45.2,0,0,1-90.4,0c0-25,45.2-112.92,45.2-112.92S97.89,106.27,97.89,131.23Z\"/>\r\n                    </clipPath>\r\n                </defs>\r\n                <title>Datový zdroj 34</title>\r\n                <g id=\"Vrstva_2\" data-name=\"Vrstva 2\">\r\n                    <g id=\"Vrstva_2-2\" data-name=\"Vrstva 2\">\r\n                        <text className=\"cls-2-vlh-vz\" ref={percentageText} transform=\"translate(168.67 92.37)\">20%</text>\r\n                        <g className=\"cls-3-vlh-vz\">\r\n                            <path className=\"cls-4-vlh-vz\" ref={percentageLevel} d=\"M107.87,130V178H-2.5V130Z\" transform=\"translate(60.15)\"/>\r\n                            <path className=\"cls-5-vlh-vz\" ref={wave1} d=\"M-60.15,119.12C-50,117.26-33.65,115.07-22.6,106c8.67-7.15,39.09,15,64.25,2.33,16.79-8.48,29.88,7.41,49.55-2.71,21.4-11,26.09,9.28,50.31,5.13,13.61-2.33,18-.34,24,8.42v92.12H-60.15Z\" transform=\"translate(60.15)\"/>\r\n                            <path className=\"cls-6-vlh-vz\" ref={wave2} d=\"M-60.15,130.57c10.16-1.46,18.58-3.63,27.06-13.73,8.21-9.78,26.9,11.07,52.65-.63,19.47-8.84,22.05,5,40.11,1.79,14.11-2.54,31.12-4.79,38.47,1.54s15.27-3.27,21.14-2.38c20.72,3.12,16.17-3,31.36-7.92,13.05-4.26,8.85,14.4,14.89,21.33v73H-60.15Z\" transform=\"translate(60.15)\"/>\r\n                            <line ref={percentageLine} className=\"cls-7-vlh-vz\" x1=\"60.65\" y1=\"94.6\" x2=\"192.78\" y2=\"94.6\"/>\r\n                        </g>\r\n                        <path className=\"cls-8-vlh-vz\" d=\"M104.87,131.47a52.19,52.19,0,0,1-104.37,0C.5,102.64,52.69,1.09,52.69,1.09S104.87,102.64,104.87,131.47Z\" transform=\"translate(60.15)\"/>\r\n                        <line ref={percentageLine2} data-name=\"Percentage-line\" className=\"cls-7-vlh-vz\" x1=\"112.84\" y1=\"94.6\" x2=\"192.78\" y2=\"94.6\"/>\r\n                    </g>\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AirHumidity;","import Link from \"next/link\";\r\nimport useSWR from 'swr';\r\nimport {DatePicker,MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport {createMuiTheme, makeStyles, ThemeProvider} from '@material-ui/core/styles';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {orange} from \"@material-ui/core/colors\";\r\nimport {useRouter} from \"next/router\";\r\nimport {Typography,Paper} from \"@material-ui/core\";\r\nimport withAuth from \"../../components/WithAuth\";\r\nimport WithDrawerAppBar from \"../../components/WithDrawerAppBar\";\r\nimport Tempmeter from \"../../components/Tempmeter\";\r\nimport Termostat from \"../../components/Termostat\";\r\nimport {auth, firebase} from \"../../firebase/index\";\r\nimport IPageProps from \"../../interfaces/IPageProps\";\r\nimport Loading from \"../../components/Loading\";\r\nimport {object, string} from \"prop-types\";\r\nimport {Line} from \"react-chartjs-2\";\r\nimport onlyDesktop from \"../../components/OnlyDesktop\";\r\nimport FireBackground from \"../../components/FireBackground\";\r\nimport {width} from \"@material-ui/system\";\r\nimport {url} from \"inspector\";\r\nimport SoilHumidity from \"../../components/SoilHumidity\";\r\nimport AirHumidity from \"../../components/AirHumidity\";\r\n\r\nconst useStyle = makeStyles(theme=>({\r\n    center:{\r\n        display:'flex'\r\n    },\r\n    controllComponent:{\r\n        margin:'50px',\r\n        width:'min-content',\r\n        padding:'1rem'\r\n    }\r\n}));\r\n\r\nfunction Id(props:IPageProps) {\r\n    const classes = useStyle();\r\n    const [soilHumidity,setSoilHumidity] = useState<number>(0);\r\n    const [tempHistoryCharData,setTempHistoryCharData] = useState<any>();\r\n    const [tempHistoryCharLabels,setTempHistoryCharLabels] = useState<any>();\r\n    const [defTemp,setDefTemp] = useState<number>();\r\n    const router = useRouter();\r\n    const { id } = router.query;\r\n    const timeFormat = 'MM/DD/YYYY HH:mm';\r\n\r\n\r\n    let soilHumidityData = firebase.database().ref(\"/users/\"+props.user+\"/devices/\"+id+\"/soilHumidity\");\r\n    let humidityHistoryData = firebase.database().ref(\"/users/\"+props.user+\"/devices/\"+id+\"/humiditys\");\r\n    //let targetTempData = firebase.database().ref(\"/users/\"+props.user+\"/devices/\"+id+\"/targetTemp\");\r\n\r\n    const termostatChange = (value:number) => {\r\n        firebase.database().ref(\"/users/\"+props.user+\"/devices/\"+id+\"/targetTemp\").set(value);\r\n    };\r\n\r\n    useEffect(()=>{\r\n        soilHumidityData.on('value',data=>{\r\n            setSoilHumidity(data.val());\r\n        });\r\n\r\n        /*humidityHistoryData.on('value',data=>{\r\n            let charData:any[] = [];\r\n            let charLabels:any[] = [];\r\n            Object.keys(data.val()).forEach(key => {\r\n                charData.push(data.val()[key].temp);\r\n                charLabels.push(data.val()[key].time[1]+'/'+data.val()[key].time[2]+'/'+data.val()[key].time[0]+' '+data.val()[key].time[3]+':'+data.val()[key].time[4])\r\n            });\r\n\r\n            setTempHistoryCharData(charData);\r\n            setTempHistoryCharLabels(charLabels);\r\n        });*/\r\n\r\n        /*targetTempData.once('value',data=>{\r\n            setDefTemp(data.val());\r\n        });*/\r\n\r\n    },[]);\r\n\r\n return(\r\n     <div>\r\n         <Typography component={\"h1\"} variant={\"h2\"}>\r\n             Zavlažování\r\n         </Typography>\r\n         <div className={classes.center}>\r\n             <div className={classes.controllComponent}>\r\n                 <Paper elevation={3} style={{padding: '1rem'}}>\r\n                     <SoilHumidity theme={props.theme} value={soilHumidity}/>\r\n                 </Paper>\r\n             </div>\r\n             <div className={classes.controllComponent}>\r\n                 <Paper elevation={3} style={{padding: '1rem'}}>\r\n                    <AirHumidity theme={props.theme} value={0} />\r\n                 </Paper>\r\n             </div>\r\n         </div>\r\n         <div className={classes.center}>\r\n            <div className={classes.controllComponent} style={{width:'calc(100% - 100px)'}}>\r\n                <Paper>\r\n                    <Line data={{\r\n                        labels:tempHistoryCharLabels,\r\n                        datasets: [{\r\n                            label: 'temp',\r\n                            data: tempHistoryCharData,\r\n                            backgroundColor: 'rgba(0,0,0,0)',\r\n                            pointBackgroundColor: 'red',\r\n                            borderColor: 'red',\r\n                            borderWidth: 0\r\n                        }]\r\n                    }} options={{\r\n                        scales:{\r\n                            xAxes: [{\r\n                                gridLines: {\r\n                                    display: false,\r\n                                },\r\n                            }],\r\n                            yAxes: [{\r\n                                gridLines: {\r\n                                    color:props.theme==1?'rgba(255,255,255,0.1)':'rgba(0,0,0,0.1)',\r\n                                    zeroLineColor:props.theme==1?'rgba(255,255,255,0.1)':'rgba(0,0,0,0.1)',\r\n                                    drawTicks:false,\r\n                                },\r\n                                ticks: {\r\n                                    stepSize: 10,\r\n                                    padding:10\r\n                                }\r\n                            }],\r\n                        },\r\n                        maintainAspectRatio: false,\r\n                        /*xAxes:[{\r\n\r\n                        }]*/\r\n                    }}/>\r\n                </Paper>\r\n            </div>\r\n         </div>\r\n     </div>\r\n )\r\n}\r\n\r\nfunction ex(props:IPageProps) {\r\n    const router = useRouter();\r\n    const { id } = router.query;\r\n    const [name,setName] = useState(\"\");\r\n    let nameData = firebase.database().ref(\"/users/\"+props.user+\"/devices/\"+id+\"/name\");\r\n    useEffect(()=>{\r\n        nameData.on('value',data=>{\r\n            setName(data.val());\r\n        });\r\n    },[]);\r\n    return(\r\n        <WithDrawerAppBar component={Id} title={name} deviceId={id.toString()} componentProps={props}/>\r\n    )\r\n}\r\n\r\nexport default onlyDesktop(withAuth(ex));"],"mappings":"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","sourceRoot":""}