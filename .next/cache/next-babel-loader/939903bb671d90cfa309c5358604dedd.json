{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar _jsxFileName = \"C:\\\\Users\\\\Jakub Sedlak\\\\WebstormProjects\\\\projekt_CP\\\\components\\\\Termostat.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef, useState } from \"react\";\nimport anime from \"animejs\";\nimport { firebase } from \"../firebase/index\";\n\nfunction Termostat(props) {\n  var min = 0;\n  var max = 50;\n  var minAngle = 0;\n  var maxAngle = 180;\n  var segCount = 22; //11;\n\n  var initValue = props.defaultValue;\n  var lines = useRef();\n  var valueInput = useRef();\n  var hand = useRef();\n  var handle = useRef();\n\n  var _useState = useState(),\n      containers = _useState[0],\n      setContainers = _useState[1];\n\n  var _useState2 = useState(),\n      lastNode = _useState2[0],\n      setLastNode = _useState2[1];\n\n  var _useState3 = useState(0),\n      lastNodeAngle = _useState3[0],\n      setLastNodeAngle = _useState3[1];\n\n  var _useState4 = useState(0),\n      angleTrans = _useState4[0],\n      setAngleTrans = _useState4[1];\n\n  var _useState5 = useState(0),\n      currentAngle = _useState5[0],\n      setCurrentAngle = _useState5[1];\n\n  var _useState6 = useState(0),\n      handAngle = _useState6[0],\n      setHandAngle = _useState6[1];\n\n  var _useState7 = useState(0),\n      currentValue = _useState7[0],\n      setCurrentValue = _useState7[1];\n\n  var _useState8 = useState(false),\n      drag = _useState8[0],\n      setDrag = _useState8[1];\n\n  function inputUpdated(e) {\n    var val = e.target.value;\n    setCurrentValue(val);\n    setCurrentAngle(maxAngle / max * val);\n  }\n\n  function onMove(e) {\n    if (drag) {\n      var angle = Math.atan2(e.nativeEvent.offsetY - 250, e.nativeEvent.offsetX - 250);\n      var angle2 = angle * (180 / Math.PI); //to 360 range\n\n      if (angle2 < 0) {\n        angle2 = 360 - -angle2;\n      } //set 0 angle\n\n\n      angle2 += 180; //corect angle\n\n      if (angle2 > 360) angle2 -= 360;\n\n      if (angle2 >= 0 && angle2 <= maxAngle) {\n        setCurrentValue(Math.round(max / maxAngle * angle2));\n        setAngleTrans(angle2);\n        setHandAngle(angle2);\n      }\n    }\n  }\n\n  function onDrag(e) {\n    if (!drag) {\n      setDrag(true);\n      handle.current.style.pointerEvents = \"none\";\n    }\n  }\n\n  function onDragEnd(e) {\n    if (drag) {\n      setDrag(false);\n      handle.current.style.pointerEvents = \"all\";\n    }\n  }\n\n  useEffect(function () {\n    if (containers) {\n      var angle = Math.round(handAngle);\n\n      if (angle <= maxAngle && angle >= minAngle) {\n        for (var i = 0; i < containers.length; i++) {\n          var containerAngle = _parseInt(containers[i].getAttribute('rotate'));\n\n          if (containerAngle > lastNodeAngle && containerAngle <= angle || containerAngle < lastNodeAngle && angle <= containerAngle) {\n            anime({\n              targets: lastNode,\n              scale: [{\n                value: 1,\n                easing: 'easeInOutQuad',\n                duration: 500\n              }],\n              delay: 0\n            });\n            anime({\n              targets: containers[i].childNodes,\n              scale: [{\n                value: 1.5,\n                easing: 'easeOutSine',\n                duration: 500\n              }],\n              delay: 0\n            });\n            setLastNode(containers[i].childNodes[0]);\n            setLastNodeAngle(containerAngle);\n            break;\n          }\n        }\n\n        ;\n        hand.current.style.transform = \"rotate(\" + angle + \"deg)\";\n      }\n    }\n  }, [handAngle]);\n  useEffect(function () {\n    var anim = {\n      value: angleTrans\n    };\n    anime({\n      targets: anim,\n      value: currentAngle,\n\n      /*easing:\"linear\",*/\n      duration: 500,\n      update: function update() {\n        //updateHandAngle(anim.value);\n        setHandAngle(anim.value);\n      },\n      complete: function complete() {\n        setAngleTrans(currentAngle);\n      }\n    });\n  }, [currentAngle]);\n  useEffect(function () {\n    valueInput.current.value = currentValue;\n  }, [currentValue]);\n  useEffect(function () {\n    var j = 0;\n\n    for (var i = 0; i < segCount; i++) {\n      var _handAngle = Math.round(maxAngle / max * j);\n\n      var line = '<div rotate=' + _handAngle + ' style=\"transform:rotate(' + _handAngle + 'deg)!important;\" class=\"lineContainer\"><div class=\"line\"></div></div>';\n      lines.current.innerHTML += line;\n      j += max / (segCount - 1);\n    }\n\n    var contData = document.getElementsByClassName('lineContainer');\n    var initlastNode = contData[0].childNodes[0];\n    var initLastNodeAngle = 0;\n    anime({\n      targets: contData[0].childNodes[0],\n      scale: [{\n        value: 1.5,\n        easing: 'easeOutSine',\n        duration: 500\n      }],\n      delay: 0\n    });\n    var lineSegs = document.getElementsByClassName(\"line\");\n    var first = [73, 80, 245];\n    var second = [244, 67, 54];\n\n    for (var _i = 0; _i < lineSegs.length; _i++) {\n      var percent = _i / (lineSegs.length - 1);\n      var red = first[0] + percent * (second[0] - first[0]);\n      var green = first[1] + percent * (second[1] - first[1]);\n      var blue = first[2] + percent * (second[2] - first[2]);\n      lineSegs[_i].style.background = \"rgb(\" + red + \",\" + green + \",\" + blue + \")\";\n    }\n\n    ;\n    setContainers(contData);\n\n    var updateHandAngle = function updateHandAngle(angle) {\n      angle = Math.round(angle);\n\n      if (angle <= maxAngle && angle >= minAngle) {\n        for (var _i2 = 0; _i2 < contData.length; _i2++) {\n          var containerAngle = _parseInt(contData[_i2].getAttribute('rotate'));\n\n          if (containerAngle > initLastNodeAngle && containerAngle <= angle || containerAngle < initLastNodeAngle && angle <= containerAngle) {\n            anime({\n              targets: initlastNode,\n              scale: [{\n                value: 1,\n                easing: 'easeInOutQuad',\n                duration: 500\n              }],\n              delay: 0\n            });\n            anime({\n              targets: contData[_i2].childNodes,\n              scale: [{\n                value: 1.5,\n                easing: 'easeOutSine',\n                duration: 500\n              }],\n              delay: 0\n            });\n            initlastNode = contData[_i2].childNodes[0];\n            initLastNodeAngle = containerAngle;\n            break;\n          }\n        }\n\n        ; //document.getElementById(\"hand\").style.transform=\"rotate(\"+(angle)+\"deg)\";\n      }\n    };\n\n    var initAngleTrans = {\n      value: 0\n    };\n    anime({\n      targets: initAngleTrans,\n      value: maxAngle / max * initValue,\n\n      /*easing:\"linear\",*/\n      duration: 500,\n      update: function update() {\n        updateHandAngle(initAngleTrans.value);\n      },\n      complete: function complete() {\n        setLastNode(initlastNode);\n        setLastNodeAngle(initLastNodeAngle);\n        setCurrentValue(initValue);\n        setCurrentAngle(maxAngle / max * initValue);\n      }\n    });\n  }, []);\n  return __jsx(\"div\", {\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"work\",\n    onMouseMove: onMove,\n    onMouseUp: onDragEnd,\n    className: \"jsx-2108097354\" + \" \" + \"workspace\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    id: \"handPath\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 161.45 161.45\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, __jsx(\"defs\", {\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, __jsx(\"style\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, \".pathcircle{fill:none;stroke:\" + (props.theme == 1 ? \"white\" : \"black\") + \";stroke-miterlimit:10;stroke-opacity:0.08;stroke-width:2px;}\")), __jsx(\"title\", {\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, \"Datov\\xFD zdroj 22\"), __jsx(\"g\", {\n    id: \"Vrstva_2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, __jsx(\"g\", {\n    id: \"Vrstva_2-2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, __jsx(\"circle\", {\n    cx: \"80.73\",\n    cy: \"80.73\",\n    r: \"80.6\",\n    \"stroke-dasharray\": \"253\",\n    \"stroke-dashoffset\": \"253\",\n    className: \"jsx-2108097354\" + \" \" + \"pathcircle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  })))), __jsx(\"div\", {\n    ref: lines,\n    id: \"lines\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    ref: hand,\n    id: \"hand\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    ref: handle,\n    onMouseDown: onDrag,\n    id: \"handle\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 26.04 26.04\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, __jsx(\"defs\", {\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, __jsx(\"style\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, \".handle{fill:#2196f3;}\")), __jsx(\"title\", {\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"Datov\\xFD zdroj 25\"), __jsx(\"g\", {\n    id: \"Vrstva_2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }, __jsx(\"g\", {\n    id: \"Vrstva_2-2\",\n    \"data-name\": \"Vrstva 2\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  }, __jsx(\"circle\", {\n    cx: \"13.02\",\n    cy: \"13.02\",\n    r: \"13.02\",\n    className: \"jsx-2108097354\" + \" \" + \"handle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  })))))), __jsx(\"input\", {\n    ref: valueInput,\n    onBlur: inputUpdated,\n    type: \"number\",\n    className: \"jsx-2108097354\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"2108097354\",\n    __self: this\n  }, \".workspace{background:none;height:500px;width:500px;margin:auto;position:relative;border-radius:100%;}#lines,#handPath,.lineContainer{pointer-events:none;overflow:visible;}#handPath{width:5rem;height:5rem;}#lines{position:absolute;height:0px;width:500px;margin-top:50%;}.lineContainer{width:250px;position:absolute;-webkit-transform-origin:right center;-ms-transform-origin:right center;transform-origin:right center;}.line{height:5px;width:3rem;margin-left:1.5rem;}#handPath{width:250px;height:250px;margin:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:absolute;}#hand{margin-top:50%;background:red;-webkit-transform-origin:right center;-ms-transform-origin:right center;transform-origin:right center;position:absolute;width:250px;height:0;}#handle{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;width:2rem;height:2rem;-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);right:125px;position:absolute;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcSmFrdWIgU2VkbGFrXFxXZWJzdG9ybVByb2plY3RzXFxwcm9qZWt0X0NQXFxjb21wb25lbnRzXFxUZXJtb3N0YXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbVArQixBQUc2QyxBQVFOLEFBSVYsQUFJTyxBQU1MLEFBS0YsQUFLRSxBQU9FLEFBUUYsV0FsQ0QsQUFlRCxDQUxPLEFBVUYsR0FPRCxDQXZDRixFQWdCRixFQVJNLEVBb0JFLENBZnBCLEVBb0JlLElBaENGLEFBZ0JBLENBTW1CLEFBaUJBLE1BTkksQ0F6QnBDLElBUGEsQUFnQkcsQUFXaEIsUUFrQlksSUE1Q08sR0FnQm5CLElBNkJhLFdBNUNPLENBNkNXLGtCQTVDL0IsMENBbUJBLEFBaUJtQixTQU5HLFNBT1QsU0FOYixHQU9VLFNBQ1YsR0FNYSxZQUNNLGtCQUNuQiIsImZpbGUiOiJDOlxcVXNlcnNcXEpha3ViIFNlZGxha1xcV2Vic3Rvcm1Qcm9qZWN0c1xccHJvamVrdF9DUFxcY29tcG9uZW50c1xcVGVybW9zdGF0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7dXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IGFuaW1lIGZyb20gXCJhbmltZWpzXCI7XHJcbmltcG9ydCB7ZmlyZWJhc2V9IGZyb20gXCIuLi9maXJlYmFzZS9pbmRleFwiO1xyXG5mdW5jdGlvbiBUZXJtb3N0YXQocHJvcHMpe1xyXG4gICAgY29uc3QgbWluID0gMDtcclxuICAgIGNvbnN0IG1heCA9IDUwO1xyXG4gICAgY29uc3QgbWluQW5nbGUgPSAwO1xyXG4gICAgY29uc3QgbWF4QW5nbGUgPSAxODA7XHJcbiAgICBjb25zdCBzZWdDb3VudCA9IDIyLy8xMTtcclxuICAgIGNvbnN0IGluaXRWYWx1ZSA9IHByb3BzLmRlZmF1bHRWYWx1ZTtcclxuICAgIGNvbnN0IGxpbmVzID0gdXNlUmVmKCk7XHJcbiAgICBjb25zdCB2YWx1ZUlucHV0ID0gdXNlUmVmKCk7XHJcbiAgICBjb25zdCBoYW5kID0gdXNlUmVmKCk7XHJcbiAgICBjb25zdCBoYW5kbGUgPSB1c2VSZWYoKTtcclxuICAgIGxldCBbY29udGFpbmVycyxzZXRDb250YWluZXJzXSA9IHVzZVN0YXRlKCk7XHJcbiAgICBsZXQgW2xhc3ROb2RlLHNldExhc3ROb2RlXSA9IHVzZVN0YXRlKCk7XHJcbiAgICBsZXQgW2xhc3ROb2RlQW5nbGUsc2V0TGFzdE5vZGVBbmdsZV0gPSB1c2VTdGF0ZSgwKTtcclxuICAgIGxldCBbYW5nbGVUcmFucyxzZXRBbmdsZVRyYW5zXSA9IHVzZVN0YXRlKDApO1xyXG4gICAgbGV0IFtjdXJyZW50QW5nbGUsc2V0Q3VycmVudEFuZ2xlXSA9IHVzZVN0YXRlKDApO1xyXG4gICAgbGV0IFtoYW5kQW5nbGUsc2V0SGFuZEFuZ2xlXSA9IHVzZVN0YXRlKDApO1xyXG4gICAgbGV0IFtjdXJyZW50VmFsdWUsc2V0Q3VycmVudFZhbHVlXSA9IHVzZVN0YXRlKDApO1xyXG4gICAgbGV0IFtkcmFnLHNldERyYWddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGlucHV0VXBkYXRlZChlKXtcclxuICAgICAgICBsZXQgdmFsID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgc2V0Q3VycmVudFZhbHVlKHZhbCk7XHJcbiAgICAgICAgc2V0Q3VycmVudEFuZ2xlKChtYXhBbmdsZS9tYXgpKnZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25Nb3ZlKGUpe1xyXG4gICAgICAgIGlmKGRyYWcpe1xyXG4gICAgICAgICAgICBsZXQgYW5nbGUgPSBNYXRoLmF0YW4yKGUubmF0aXZlRXZlbnQub2Zmc2V0WS0yNTAsIGUubmF0aXZlRXZlbnQub2Zmc2V0WC0yNTApO1xyXG4gICAgICAgICAgICBsZXQgYW5nbGUyID0gYW5nbGUgKiAoMTgwL01hdGguUEkpO1xyXG4gICAgICAgICAgICAvL3RvIDM2MCByYW5nZVxyXG4gICAgICAgICAgICBpZihhbmdsZTIgPCAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhbmdsZTIgPSAzNjAtKC1hbmdsZTIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vc2V0IDAgYW5nbGVcclxuICAgICAgICAgICAgYW5nbGUyKz0gMTgwO1xyXG4gICAgICAgICAgICAvL2NvcmVjdCBhbmdsZVxyXG4gICAgICAgICAgICBpZihhbmdsZTIgPiAzNjApXHJcbiAgICAgICAgICAgICAgICBhbmdsZTItPTM2MFxyXG5cclxuICAgICAgICAgICAgaWYoYW5nbGUyID49IDAgJiYgYW5nbGUyIDw9IG1heEFuZ2xlKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmFsdWUoTWF0aC5yb3VuZCgobWF4IC8gbWF4QW5nbGUpICogYW5nbGUyKSk7XHJcbiAgICAgICAgICAgICAgICBzZXRBbmdsZVRyYW5zKGFuZ2xlMik7XHJcbiAgICAgICAgICAgICAgICBzZXRIYW5kQW5nbGUoYW5nbGUyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbkRyYWcoZSl7XHJcbiAgICAgICAgaWYoIWRyYWcpIHtcclxuICAgICAgICAgICAgc2V0RHJhZyh0cnVlKTtcclxuICAgICAgICAgICAgaGFuZGxlLmN1cnJlbnQuc3R5bGUucG9pbnRlckV2ZW50cz0gXCJub25lXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uRHJhZ0VuZChlKXtcclxuICAgICAgICBpZihkcmFnKXtcclxuICAgICAgICAgICAgc2V0RHJhZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIGhhbmRsZS5jdXJyZW50LnN0eWxlLnBvaW50ZXJFdmVudHM9XCJhbGxcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpPT57XHJcbiAgICAgICAgaWYoY29udGFpbmVycykge1xyXG4gICAgICAgICAgICBsZXQgYW5nbGUgPSBNYXRoLnJvdW5kKGhhbmRBbmdsZSk7XHJcbiAgICAgICAgICAgIGlmIChhbmdsZSA8PSBtYXhBbmdsZSAmJiBhbmdsZSA+PSBtaW5BbmdsZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250YWluZXJzLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250YWluZXJBbmdsZSA9IHBhcnNlSW50KGNvbnRhaW5lcnNbaV0uZ2V0QXR0cmlidXRlKCdyb3RhdGUnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjb250YWluZXJBbmdsZSA+IGxhc3ROb2RlQW5nbGUgJiYgY29udGFpbmVyQW5nbGUgPD0gYW5nbGUpIHx8IChjb250YWluZXJBbmdsZSA8IGxhc3ROb2RlQW5nbGUgJiYgYW5nbGUgPD0gY29udGFpbmVyQW5nbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IGxhc3ROb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6IDEsIGVhc2luZzogJ2Vhc2VJbk91dFF1YWQnLCBkdXJhdGlvbjogNTAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogY29udGFpbmVyc1tpXS5jaGlsZE5vZGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWU6IDEuNSwgZWFzaW5nOiAnZWFzZU91dFNpbmUnLCBkdXJhdGlvbjogNTAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdE5vZGUoY29udGFpbmVyc1tpXS5jaGlsZE5vZGVzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdE5vZGVBbmdsZShjb250YWluZXJBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICBoYW5kLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGUoXCIgKyAoYW5nbGUpICsgXCJkZWcpXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFtoYW5kQW5nbGVdKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCk9PntcclxuICAgICAgICBsZXQgYW5pbSA9IHtcclxuICAgICAgICAgICAgdmFsdWU6YW5nbGVUcmFuc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgdGFyZ2V0czphbmltLFxyXG4gICAgICAgICAgICB2YWx1ZTooY3VycmVudEFuZ2xlKSxcclxuICAgICAgICAgICAgLyplYXNpbmc6XCJsaW5lYXJcIiwqL1xyXG4gICAgICAgICAgICBkdXJhdGlvbjo1MDAsXHJcbiAgICAgICAgICAgIHVwZGF0ZTpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgLy91cGRhdGVIYW5kQW5nbGUoYW5pbS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBzZXRIYW5kQW5nbGUoYW5pbS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbXBsZXRlOigpPT57XHJcbiAgICAgICAgICAgICAgICBzZXRBbmdsZVRyYW5zKGN1cnJlbnRBbmdsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sW2N1cnJlbnRBbmdsZV0pO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKT0+e1xyXG4gICAgICAgIHZhbHVlSW5wdXQuY3VycmVudC52YWx1ZSA9IGN1cnJlbnRWYWx1ZTtcclxuICAgIH0sW2N1cnJlbnRWYWx1ZV0pO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKT0+e1xyXG4gICAgICAgIGxldCBqID0gMDtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2VnQ291bnQ7IGkrKyl7XHJcbiAgICAgICAgICAgIGxldCBoYW5kQW5nbGUgPSBNYXRoLnJvdW5kKChtYXhBbmdsZS9tYXgpKmopO1xyXG4gICAgICAgICAgICBsZXQgbGluZSA9ICc8ZGl2IHJvdGF0ZT0nK2hhbmRBbmdsZSsnIHN0eWxlPVwidHJhbnNmb3JtOnJvdGF0ZSgnK2hhbmRBbmdsZSsnZGVnKSFpbXBvcnRhbnQ7XCIgY2xhc3M9XCJsaW5lQ29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImxpbmVcIj48L2Rpdj48L2Rpdj4nO1xyXG4gICAgICAgICAgICBsaW5lcy5jdXJyZW50LmlubmVySFRNTCArPSBsaW5lO1xyXG4gICAgICAgICAgICBqKz1tYXgvKHNlZ0NvdW50LTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNvbnREYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbGluZUNvbnRhaW5lcicpO1xyXG4gICAgICAgIGxldCBpbml0bGFzdE5vZGUgPSBjb250RGF0YVswXS5jaGlsZE5vZGVzWzBdO1xyXG4gICAgICAgIGxldCBpbml0TGFzdE5vZGVBbmdsZSA9IDA7XHJcbiAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICB0YXJnZXRzOiBjb250RGF0YVswXS5jaGlsZE5vZGVzWzBdLFxyXG4gICAgICAgICAgICBzY2FsZTogW1xyXG4gICAgICAgICAgICAgICAge3ZhbHVlOiAxLjUsIGVhc2luZzogJ2Vhc2VPdXRTaW5lJywgZHVyYXRpb246IDUwMH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBsaW5lU2VncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsaW5lXCIpO1xyXG4gICAgICAgIGNvbnN0IGZpcnN0ID0gWzczLCA4MCwgMjQ1XTtcclxuICAgICAgICBjb25zdCBzZWNvbmQgPSBbMjQ0LCA2NywgNTRdO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGluZVNlZ3MubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIHZhciBwZXJjZW50ID0gKChpKS8obGluZVNlZ3MubGVuZ3RoLTEpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZWQgPSBmaXJzdFswXSArIHBlcmNlbnQgKiAoc2Vjb25kWzBdIC0gZmlyc3RbMF0pO1xyXG4gICAgICAgICAgICB2YXIgZ3JlZW4gPSBmaXJzdFsxXSArIHBlcmNlbnQgKiAoc2Vjb25kWzFdIC0gZmlyc3RbMV0pO1xyXG4gICAgICAgICAgICB2YXIgYmx1ZSA9IGZpcnN0WzJdICsgcGVyY2VudCAqIChzZWNvbmRbMl0gLSBmaXJzdFsyXSk7XHJcblxyXG4gICAgICAgICAgICBsaW5lU2Vnc1tpXS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJyZ2IoXCIrcmVkK1wiLFwiK2dyZWVuK1wiLFwiK2JsdWUrXCIpXCI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2V0Q29udGFpbmVycyhjb250RGF0YSk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlSGFuZEFuZ2xlID0gKGFuZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIGFuZ2xlID0gTWF0aC5yb3VuZChhbmdsZSk7XHJcblxyXG4gICAgICAgICAgICBpZihhbmdsZSA8PSBtYXhBbmdsZSAmJiBhbmdsZSA+PSBtaW5BbmdsZSl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29udERhdGEubGVuZ3RoOyBpKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGFpbmVyQW5nbGUgPSBwYXJzZUludChjb250RGF0YVtpXS5nZXRBdHRyaWJ1dGUoJ3JvdGF0ZScpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZigoY29udGFpbmVyQW5nbGUgPiBpbml0TGFzdE5vZGVBbmdsZSAmJiBjb250YWluZXJBbmdsZSA8PSBhbmdsZSkgfHwgKGNvbnRhaW5lckFuZ2xlIDwgaW5pdExhc3ROb2RlQW5nbGUgJiYgYW5nbGUgPD0gY29udGFpbmVyQW5nbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IGluaXRsYXN0Tm9kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiAxLCBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJywgZHVyYXRpb246IDUwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IGNvbnREYXRhW2ldLmNoaWxkTm9kZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogMS41LCBlYXNpbmc6ICdlYXNlT3V0U2luZScsIGR1cmF0aW9uOiA1MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0bGFzdE5vZGUgPSBjb250RGF0YVtpXS5jaGlsZE5vZGVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0TGFzdE5vZGVBbmdsZSA9IGNvbnRhaW5lckFuZ2xlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoYW5kXCIpLnN0eWxlLnRyYW5zZm9ybT1cInJvdGF0ZShcIisoYW5nbGUpK1wiZGVnKVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGluaXRBbmdsZVRyYW5zID0ge1xyXG4gICAgICAgICAgICB2YWx1ZTowXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgIHRhcmdldHM6aW5pdEFuZ2xlVHJhbnMsXHJcbiAgICAgICAgICAgIHZhbHVlOigobWF4QW5nbGUvbWF4KSppbml0VmFsdWUpLFxyXG4gICAgICAgICAgICAvKmVhc2luZzpcImxpbmVhclwiLCovXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOjUwMCxcclxuICAgICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVIYW5kQW5nbGUoaW5pdEFuZ2xlVHJhbnMudmFsdWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21wbGV0ZTpmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRMYXN0Tm9kZShpbml0bGFzdE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgc2V0TGFzdE5vZGVBbmdsZShpbml0TGFzdE5vZGVBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmFsdWUoaW5pdFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRBbmdsZSgobWF4QW5nbGUvbWF4KSppbml0VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFtdKTtcclxuXHJcbiAgICByZXR1cm4oXHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPGRpdiBpZD1cIndvcmtcIiBvbk1vdXNlTW92ZT17b25Nb3ZlfSBvbk1vdXNlVXA9e29uRHJhZ0VuZH0gY2xhc3NOYW1lPVwid29ya3NwYWNlXCI+XHJcbiAgICAgICAgICAgICAgICA8c3ZnIGlkPVwiaGFuZFBhdGhcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxNjEuNDUgMTYxLjQ1XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRlZnM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZT57XCIucGF0aGNpcmNsZXtmaWxsOm5vbmU7c3Ryb2tlOlwiKyhwcm9wcy50aGVtZT09MT9cIndoaXRlXCI6XCJibGFja1wiKStcIjtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2Utb3BhY2l0eTowLjA4O3N0cm9rZS13aWR0aDoycHg7fVwifTwvc3R5bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aXRsZT5EYXRvdsO9IHpkcm9qIDIyPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICA8ZyBpZD1cIlZyc3R2YV8yXCIgZGF0YS1uYW1lPVwiVnJzdHZhIDJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9XCJWcnN0dmFfMi0yXCIgZGF0YS1uYW1lPVwiVnJzdHZhIDJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3NOYW1lPVwicGF0aGNpcmNsZVwiIGN4PVwiODAuNzNcIiBjeT1cIjgwLjczXCIgcj1cIjgwLjZcIiBzdHJva2UtZGFzaGFycmF5PVwiMjUzXCIgc3Ryb2tlLWRhc2hvZmZzZXQ9XCIyNTNcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPXtsaW5lc30gaWQ9XCJsaW5lc1wiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17aGFuZH0gaWQ9XCJoYW5kXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyByZWY9e2hhbmRsZX0gb25Nb3VzZURvd249e29uRHJhZ30gaWQ9XCJoYW5kbGVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNi4wNCAyNi4wNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGVmcz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZT57XCIuaGFuZGxle2ZpbGw6IzIxOTZmMzt9XCJ9PC9zdHlsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+RGF0b3bDvSB6ZHJvaiAyNTwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPVwiVnJzdHZhXzJcIiBkYXRhLW5hbWU9XCJWcnN0dmEgMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9XCJWcnN0dmFfMi0yXCIgZGF0YS1uYW1lPVwiVnJzdHZhIDJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cImhhbmRsZVwiIGN4PVwiMTMuMDJcIiBjeT1cIjEzLjAyXCIgcj1cIjEzLjAyXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxpbnB1dCByZWY9e3ZhbHVlSW5wdXR9IG9uQmx1cj17aW5wdXRVcGRhdGVkfSB0eXBlID0gXCJudW1iZXJcIj48L2lucHV0PlxyXG4gICAgICAgICAgICA8c3R5bGUganN4IGdsb2JhbD57YFxyXG4gICAgICAgICAgICAgICAgLndvcmtzcGFjZXtcclxuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDovKiMyMTIxMjEqL25vbmU7XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDo1MDBweDtcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6NTAwcHg7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjphdXRvO1xyXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czoxMDAlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgI2xpbmVzLCNoYW5kUGF0aCwubGluZUNvbnRhaW5lcntcclxuICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAgIG92ZXJmbG93OnZpc2libGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAjaGFuZFBhdGh7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOjVyZW07XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDo1cmVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgI2xpbmVze1xyXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OjBweDtcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6NTAwcHg7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6NTAlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmxpbmVDb250YWluZXJ7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNTBweDtcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5saW5le1xyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6NXB4O1xyXG4gICAgICAgICAgICAgICAgICB3aWR0aDozcmVtO1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDoxLjVyZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAjaGFuZFBhdGh7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNTBweDtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1MHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogNTAlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICNoYW5ke1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOjUwJTtcclxuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDpyZWQ7XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOjI1MHB4O1xyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6MDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICNoYW5kbGV7XHJcbiAgICAgICAgICAgICAgICAgIGN1cnNvcjogZ3JhYjtcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6MnJlbTtcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OjJyZW07XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTp0cmFuc2xhdGUoNTAlLC01MCUpO1xyXG4gICAgICAgICAgICAgICAgICByaWdodDoxMjVweDtcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVybW9zdGF0OyJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Jakub Sedlak\\\\\\\\WebstormProjects\\\\\\\\projekt_CP\\\\\\\\components\\\\\\\\Termostat.js */\"));\n}\n\nexport default Termostat;","map":{"version":3,"sources":["C:/Users/Jakub Sedlak/WebstormProjects/projekt_CP/components/Termostat.js"],"names":["React","useEffect","useRef","useState","anime","firebase","Termostat","props","min","max","minAngle","maxAngle","segCount","initValue","defaultValue","lines","valueInput","hand","handle","containers","setContainers","lastNode","setLastNode","lastNodeAngle","setLastNodeAngle","angleTrans","setAngleTrans","currentAngle","setCurrentAngle","handAngle","setHandAngle","currentValue","setCurrentValue","drag","setDrag","inputUpdated","e","val","target","value","onMove","angle","Math","atan2","nativeEvent","offsetY","offsetX","angle2","PI","round","onDrag","current","style","pointerEvents","onDragEnd","i","length","containerAngle","getAttribute","targets","scale","easing","duration","delay","childNodes","transform","anim","update","complete","j","line","innerHTML","contData","document","getElementsByClassName","initlastNode","initLastNodeAngle","lineSegs","first","second","percent","red","green","blue","background","updateHandAngle","initAngleTrans","theme"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport anime from \"animejs\";\r\nimport {firebase} from \"../firebase/index\";\r\nfunction Termostat(props){\r\n    const min = 0;\r\n    const max = 50;\r\n    const minAngle = 0;\r\n    const maxAngle = 180;\r\n    const segCount = 22//11;\r\n    const initValue = props.defaultValue;\r\n    const lines = useRef();\r\n    const valueInput = useRef();\r\n    const hand = useRef();\r\n    const handle = useRef();\r\n    let [containers,setContainers] = useState();\r\n    let [lastNode,setLastNode] = useState();\r\n    let [lastNodeAngle,setLastNodeAngle] = useState(0);\r\n    let [angleTrans,setAngleTrans] = useState(0);\r\n    let [currentAngle,setCurrentAngle] = useState(0);\r\n    let [handAngle,setHandAngle] = useState(0);\r\n    let [currentValue,setCurrentValue] = useState(0);\r\n    let [drag,setDrag] = useState(false);\r\n\r\n    function inputUpdated(e){\r\n        let val = e.target.value;\r\n        setCurrentValue(val);\r\n        setCurrentAngle((maxAngle/max)*val);\r\n    }\r\n\r\n    function onMove(e){\r\n        if(drag){\r\n            let angle = Math.atan2(e.nativeEvent.offsetY-250, e.nativeEvent.offsetX-250);\r\n            let angle2 = angle * (180/Math.PI);\r\n            //to 360 range\r\n            if(angle2 < 0)\r\n            {\r\n                angle2 = 360-(-angle2);\r\n            }\r\n            //set 0 angle\r\n            angle2+= 180;\r\n            //corect angle\r\n            if(angle2 > 360)\r\n                angle2-=360\r\n\r\n            if(angle2 >= 0 && angle2 <= maxAngle) {\r\n                setCurrentValue(Math.round((max / maxAngle) * angle2));\r\n                setAngleTrans(angle2);\r\n                setHandAngle(angle2);\r\n            }\r\n        }\r\n    }\r\n\r\n    function onDrag(e){\r\n        if(!drag) {\r\n            setDrag(true);\r\n            handle.current.style.pointerEvents= \"none\";\r\n        }\r\n    }\r\n\r\n    function onDragEnd(e){\r\n        if(drag){\r\n            setDrag(false);\r\n            handle.current.style.pointerEvents=\"all\";\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(containers) {\r\n            let angle = Math.round(handAngle);\r\n            if (angle <= maxAngle && angle >= minAngle) {\r\n                for (let i = 0; i < containers.length; i++) {\r\n\r\n                    let containerAngle = parseInt(containers[i].getAttribute('rotate'));\r\n                    if ((containerAngle > lastNodeAngle && containerAngle <= angle) || (containerAngle < lastNodeAngle && angle <= containerAngle)) {\r\n                        anime({\r\n                            targets: lastNode,\r\n                            scale: [\r\n                                {value: 1, easing: 'easeInOutQuad', duration: 500}\r\n                            ],\r\n                            delay: 0,\r\n                        });\r\n                        anime({\r\n                            targets: containers[i].childNodes,\r\n                            scale: [\r\n                                {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n                            ],\r\n                            delay: 0,\r\n                        });\r\n                        setLastNode(containers[i].childNodes[0]);\r\n                        setLastNodeAngle(containerAngle);\r\n                        break;\r\n                    }\r\n\r\n                }\r\n                ;\r\n                hand.current.style.transform = \"rotate(\" + (angle) + \"deg)\";\r\n            }\r\n        }\r\n    },[handAngle]);\r\n\r\n    useEffect(()=>{\r\n        let anim = {\r\n            value:angleTrans\r\n        };\r\n\r\n        anime({\r\n            targets:anim,\r\n            value:(currentAngle),\r\n            /*easing:\"linear\",*/\r\n            duration:500,\r\n            update:function(){\r\n                //updateHandAngle(anim.value);\r\n                setHandAngle(anim.value);\r\n            },\r\n            complete:()=>{\r\n                setAngleTrans(currentAngle);\r\n            }\r\n        });\r\n    },[currentAngle]);\r\n\r\n    useEffect(()=>{\r\n        valueInput.current.value = currentValue;\r\n    },[currentValue]);\r\n\r\n    useEffect(()=>{\r\n        let j = 0;\r\n        for(let i = 0; i < segCount; i++){\r\n            let handAngle = Math.round((maxAngle/max)*j);\r\n            let line = '<div rotate='+handAngle+' style=\"transform:rotate('+handAngle+'deg)!important;\" class=\"lineContainer\"><div class=\"line\"></div></div>';\r\n            lines.current.innerHTML += line;\r\n            j+=max/(segCount-1);\r\n        }\r\n\r\n        let contData = document.getElementsByClassName('lineContainer');\r\n        let initlastNode = contData[0].childNodes[0];\r\n        let initLastNodeAngle = 0;\r\n        anime({\r\n            targets: contData[0].childNodes[0],\r\n            scale: [\r\n                {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n            ],\r\n            delay: 0,\r\n        });\r\n\r\n        let lineSegs = document.getElementsByClassName(\"line\");\r\n        const first = [73, 80, 245];\r\n        const second = [244, 67, 54];\r\n\r\n        for(let i = 0; i < lineSegs.length;i++){\r\n            var percent = ((i)/(lineSegs.length-1));\r\n\r\n            var red = first[0] + percent * (second[0] - first[0]);\r\n            var green = first[1] + percent * (second[1] - first[1]);\r\n            var blue = first[2] + percent * (second[2] - first[2]);\r\n\r\n            lineSegs[i].style.background = \"rgb(\"+red+\",\"+green+\",\"+blue+\")\";\r\n        };\r\n\r\n        setContainers(contData);\r\n        const updateHandAngle = (angle) => {\r\n            angle = Math.round(angle);\r\n\r\n            if(angle <= maxAngle && angle >= minAngle){\r\n                for(let i = 0; i < contData.length; i++){\r\n\r\n                    let containerAngle = parseInt(contData[i].getAttribute('rotate'));\r\n                    if((containerAngle > initLastNodeAngle && containerAngle <= angle) || (containerAngle < initLastNodeAngle && angle <= containerAngle)) {\r\n                        anime({\r\n                            targets: initlastNode,\r\n                            scale: [\r\n                                {value: 1, easing: 'easeInOutQuad', duration: 500}\r\n                            ],\r\n                            delay: 0,\r\n                        });\r\n                        anime({\r\n                            targets: contData[i].childNodes,\r\n                            scale: [\r\n                                {value: 1.5, easing: 'easeOutSine', duration: 500}\r\n                            ],\r\n                            delay: 0,\r\n                        });\r\n                        initlastNode = contData[i].childNodes[0];\r\n                        initLastNodeAngle = containerAngle;\r\n                        break;\r\n                    }\r\n\r\n                };\r\n                //document.getElementById(\"hand\").style.transform=\"rotate(\"+(angle)+\"deg)\";\r\n            }\r\n        };\r\n\r\n        let initAngleTrans = {\r\n            value:0\r\n        }\r\n\r\n        anime({\r\n            targets:initAngleTrans,\r\n            value:((maxAngle/max)*initValue),\r\n            /*easing:\"linear\",*/\r\n            duration:500,\r\n            update:function(){\r\n                updateHandAngle(initAngleTrans.value);\r\n            },\r\n            complete:function () {\r\n                setLastNode(initlastNode);\r\n                setLastNodeAngle(initLastNodeAngle);\r\n                setCurrentValue(initValue);\r\n                setCurrentAngle((maxAngle/max)*initValue);\r\n            }\r\n        });\r\n    },[]);\r\n\r\n    return(\r\n        <div>\r\n            <div id=\"work\" onMouseMove={onMove} onMouseUp={onDragEnd} className=\"workspace\">\r\n                <svg id=\"handPath\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 161.45 161.45\">\r\n                    <defs>\r\n                        <style>{\".pathcircle{fill:none;stroke:\"+(props.theme==1?\"white\":\"black\")+\";stroke-miterlimit:10;stroke-opacity:0.08;stroke-width:2px;}\"}</style>\r\n                    </defs>\r\n                    <title>Datový zdroj 22</title>\r\n                    <g id=\"Vrstva_2\" data-name=\"Vrstva 2\">\r\n                        <g id=\"Vrstva_2-2\" data-name=\"Vrstva 2\">\r\n                            <circle className=\"pathcircle\" cx=\"80.73\" cy=\"80.73\" r=\"80.6\" stroke-dasharray=\"253\" stroke-dashoffset=\"253\"/>\r\n                        </g>\r\n                    </g>\r\n                </svg>\r\n                <div ref={lines} id=\"lines\">\r\n                </div>\r\n                <div ref={hand} id=\"hand\">\r\n                    <svg ref={handle} onMouseDown={onDrag} id=\"handle\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 26.04 26.04\">\r\n                        <defs>\r\n                            <style>{\".handle{fill:#2196f3;}\"}</style>\r\n                        </defs>\r\n                        <title>Datový zdroj 25</title>\r\n                        <g id=\"Vrstva_2\" data-name=\"Vrstva 2\">\r\n                            <g id=\"Vrstva_2-2\" data-name=\"Vrstva 2\">\r\n                                <circle className=\"handle\" cx=\"13.02\" cy=\"13.02\" r=\"13.02\"/>\r\n                            </g>\r\n                        </g>\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n            <input ref={valueInput} onBlur={inputUpdated} type = \"number\"></input>\r\n            <style jsx global>{`\r\n                .workspace{\r\n                  background:/*#212121*/none;\r\n                  height:500px;\r\n                  width:500px;\r\n                  margin:auto;\r\n                  position:relative;\r\n                  border-radius:100%;\r\n                }\r\n                #lines,#handPath,.lineContainer{\r\n                  pointer-events: none;\r\n                  overflow:visible;\r\n                }\r\n                #handPath{\r\n                  width:5rem;\r\n                  height:5rem;\r\n                }\r\n                #lines{\r\n                  position:absolute;\r\n                  height:0px;\r\n                  width:500px;\r\n                  margin-top:50%;\r\n                }\r\n                .lineContainer{\r\n                  width: 250px;\r\n                  position:absolute;\r\n                  transform-origin: right center;\r\n                }\r\n                .line{\r\n                  height:5px;\r\n                  width:3rem;\r\n                  margin-left:1.5rem;\r\n                }\r\n                #handPath{\r\n                  width: 250px;\r\n                    height: 250px;\r\n                    margin: 50%;\r\n                    transform: translate(-50%, -50%);\r\n                    position: absolute;\r\n                }\r\n                #hand{\r\n                  margin-top:50%;\r\n                  background:red;\r\n                  transform-origin: right center;\r\n                  position:absolute;\r\n                  width:250px;\r\n                  height:0;\r\n                }\r\n                #handle{\r\n                  cursor: grab;\r\n                  width:2rem;\r\n                  height:2rem;\r\n                  transform:translate(50%,-50%);\r\n                  right:125px;\r\n                  position:absolute;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Termostat;"]},"metadata":{},"sourceType":"module"}